<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="description" content="Unknownpgr&#x27;s Blog"/><link rel="icon" href="/favicon.png"/><meta property="og:title" content="Unknownpgr&#x27;s Blog"/><meta property="og:url" content="https://unknownpgr.com"/><meta property="og:image" content="/logo.png"/><title>Unknownpgr : 블로그 개발을 시작하다👨‍💻[7] - Refactoring</title><meta property="og:title" content="Unknownpgr: 블로그 개발을 시작하다👨‍💻[7] - Refactoring"/><meta name="next-head-count" content="9"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/2e1e96656eb72d38.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2e1e96656eb72d38.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bb77c4673c8d1507.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bb77c4673c8d1507.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-1cd5204319a0e744.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b2167bfc37ff4f0b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-ef770e12683a69af.js" defer=""></script><script src="/_next/static/c6ZW1ObeHHBx5BnsTEltR/_buildManifest.js" defer=""></script><script src="/_next/static/c6ZW1ObeHHBx5BnsTEltR/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="nav_nav__XkaAa"><a class="nav_logo__drPJg" href="/">[UNKNOWN-PGR]</a><a class="nav_link__KHlEJ" href="/">Home</a><a class="nav_link__KHlEJ" href="/categories/">Categories</a><a class="nav_link__KHlEJ" href="/about/">About</a></nav><main class="layout_main__j5lor"><div><h1 class="post_title__aQveY">블로그 개발을 시작하다👨‍💻[7] - Refactoring</h1><div class="post_info__7zaFc"><i>blog development<!-- --> / <!-- -->2020-09-25T15:56:00.000Z</i></div><main class="post_main__mmVmG"><p>얼마 전 블로그에 글을 적으려다가 큰 문제점을 하나 발견했습니다. 바로 수식이었는데요. 수학이나 물리학 관련 포스팅을 하려면 수식 입력이 필수적인데, 제 블로그 방식에서는 수식을 렌더링하기가 상당히 어려운 문제가 있었습니다. 이번에는 그 문제를 어떻게 해결했는지를 포스팅해보고자 합니다.
<img src="/imgs/cd1b3112e44d436d6cc08584bfe2b604.png" alt="Refactoring: clean your code"></p>
<h1>기존 방식의 문제점</h1>
<p>기존에는 다음과 같은 방법으로 포스트를 렌더링했었습니다.</p>
<ol>
<li>마크다운파일을 작성</li>
<li>마크다운파일을 html로 변환</li>
<li>변환된 html을 JSX로 변환</li>
<li>JSX를 동적으로 import하여 렌더링</li>
</ol>
<p>블로그를 처음 개발할 때에는 React 기능을 최대한 이용해보고 싶었습니다. 또 React에서 html을 삽입하려면 <code>dangerouslySetInnerHTML</code>라는 속성을 이용해야 하는데, 누가 봐도 <strong>이용하지 마시오</strong>라는 느낌을 풍기고 있어 이 기능을 사용하지 않고 구현했었습니다. 그래서 이런 복잡한 구현 방법을 사용하게 되었는데요.</p>
<p>이 방법의 문제점은 여러 추가 기능을 넣기가 참 힘들다는 점이었습니다. 일단 수학 식을 백엔드에서 렌더링하려고 하니, <code>class</code>를 포함한 각종 속성들을 설정해줘야 하는데 모든 속성들이 <code>.jsx</code>타입으로 잘 변환될지 장담할 수 없었습니다. 이전에 포스팅했었던 이모지 문제도 같은 맥락에서 발생하는데, html을 JSX로 변환했더니 이모지를 제대로 처리하지 못해 warning이 발생했었습니다. 이미지 처리도 상당히 번거로워서 정규표현식을 비롯한 각종 트릭을 사용해서 겨우겨우 처리했었습니다.</p>
<p>그리고 컴파일 시간이 생각보다 길다는 문제도 있었습니다. 처음에는 <code>.jsx</code>를 <code>.js</code>로 컴파일하는 것이 금방 될 것이라고 생각했었는데, 의외로 시간이 30초~1분 이상 걸려 상당히 오랫동안 기다려야만 했었습니다. 특히 포스트 하나를 컴파일하려면 모든 파일들을 다 새로 컴파일해야 한다는 것이 치명적인 단점이었습니다.</p>
<h1>새로운 방식</h1>
<p>그냥 간단하게 가기로 했습니다.</p>
<ol>
<li>마크다운을 작성</li>
<li>html파일로 저장</li>
<li>JSX에서 동적으로 로드한 html파일을 <code>dangerouslySetInnerHTML</code>속성을 이용하여 삽입 (단 동적 로드는 <code>import</code>가 아니라 <code>fetch</code>를 사용함. 즉, 재컴파일이 필요 없음.)</li>
</ol>
<h2>새로운 방식의 장점</h2>
<p>새로운 방식을 적용하면서 사용하던 라이브러리<code>showdown</code>에서 <code>markdown-it</code>으로 바꾸었는데, 이렇게 하니 많은 장점이 생겼습니다. <code>markdown-it</code>은 두 가지 단계로 동작하는데, 하나는 markdown string을 파싱하여 token들로 나누는 단계이고, 그 다음은 이 토큰들을 다시 html로 렌더링하는 단계입니다. 이때 이 두 단계 사이에서 여러 작업을 한다면 많은 것들이 수월해집니다.</p>
<h3>파싱</h3>
<p>예를 들어 이전에는 Table of Content를 만들거나 이미지, 이모지 처리를 위해 완성된 html파일을 정규표현식으로 파싱했었습니다. 이 방법은 일반적으로 잘 작동했지만, 100% 작동하기란 원리적으로 불가능했습니다. html 문법은 문맥 자유 문법인데 비해, 정규표현식은 정규 문법만을 판단할 수 있기 때문입니다. 예를 들어 attribute 내부에 <code>&gt;</code>기호가 포함되었을 경우, 기존의 처리 방법은 이것을 제대로 된 태그로 인식하지 못합니다. 그런데 <code>markdown-it</code>은 제대로 된 파서를 사용하기 때문에 이런 것들을 완벽하게 구분할 수 있습니다. 따라서 특정 태그를 가져오거나 인식하기 위해서는 Token tree를 DFS하면 됩니다. 그래서 원래는 블로그 관리자 코드가 기본 200줄에 100줄정도 되는 다른 모듈을 3개정도 포함해야 했지만, 현재는 150줄 정도 되는 파일 하나로 줄어들었습니다.</p>
<h3>Syntax Highlighter</h3>
<p>두 번째로 Syntax highlighter를 이용가능하게 되었습니다. 기존에는 코드를 입력할 때 Syntax highlight가 되지 않았는데, <code>markdown-it</code>은 <code>highlight.js</code>를 사용할 수 있는 깔끔한 방법을 제공합니다. 그래서 이제 코드 입력 시 Syntax highlight가 됩니다.</p>
<pre><code class="language-c"><span class="hljs-comment">// 코드 하이라이팅 예제</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello world!\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3>수식 렌더링</h3>
<p>세 번째로 <code>markdown-it-katex</code>라는 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span>수식 렌더링 플러그인도 있어서 수식도 렌더링이 됩니다. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>KaTeX</mtext></mrow><annotation encoding="application/x-tex">\KaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">K</span><span class="mspace" style="margin-right:-0.17em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span>라는 웹에서 레이텍을 렌더링하기 위한 라이브러리가 있는데, 이것을 <code>markdown-it</code>에서 사용할 수 있도록 래핑해놓은 플러그인입니다. (그대로 사용하기에는 몇 가지 문제가 있어 직접 수정하여 사용했습니다. 맨 아래 TMI부분을 참조해주세요.)</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Let </mtext><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mi>α</mi></mfrac><mspace linebreak="newline"></mspace><mtext>Then </mtext><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>e</mi><mfrac><mi>x</mi><mi>α</mi></mfrac></msup></mrow><annotation encoding="application/x-tex">\text{Let }f(x) =\frac{f&#x27;(x)}{\alpha}\\
\text{Then } f(x)=e^{\frac{x}{\alpha}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">Let </span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1149em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4289em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">Then </span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8971em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8971em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.0037em;">α</span></span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>이런 간단한 수식 뿐만 아니라, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span>에서 지원하는 갖은 복잡한 수식들이 다 지원됩니다.</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></msubsup><mover accent="true"><mi>ξ</mi><mo>^</mo></mover><mo separator="true">,</mo><msup><mi>e</mi><mrow><mn>2</mn><mi>π</mi><mi>i</mi><mi>ξ</mi><mi>x</mi></mrow></msup><mtext> </mtext><mi>d</mi><mi>ξ</mi></mrow><annotation encoding="application/x-tex">f(x) = \int_{-\infty}^\infty\hat\xi,e^{2 \pi i \xi x}\,d\xi
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3846em;vertical-align:-0.9703em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4143em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.8129em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9703em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1389em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">πi</span><span class="mord mathnormal mtight" style="margin-right:0.04601em;">ξ</span><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span></span></span></span></span></p>
<h3>이모지</h3>
<p>네 번째로 도대체 왜인지 모르겠지만, 이모지를 막 넣어도 오류가 안 납니다.;; 이전에는 <code>&lt;span&gt;</code>으로 둘러주고...별 이상한 과정이 다 필요했었는데.</p>
<p>👩‍💻👩‍💻🤘❤</p>
<h3>속도</h3>
<p>마지막으로 중복 컴파일이 필요없어졌습니다. 원래는 블로그 구조를 바꾸는 등 큰 작업 뿐만 아니라, 단순히 포스트 하나를 업로드하기 위해서도 블로그의 재 컴파일이 필요했었습니다. 그러나 이제는 포스트를 렌더링할 때 <code>import</code>가 아니라 <code>fetch</code>를 사용하므로 블로그 전체 구조를 바꿀 때에만 재 컴파일이 필요하고 그 외에는 컴파일 없이 블로그 포스트 작성이 가능합니다.</p>
<p>여러가지로 얻는 게 많은 리팩토링이었습니다.</p>
<h1>추가로 배운 것 - 폰트 적용법</h1>
<p>저는 NotoSans폰트를 좋아해서 아래와 같이 CSS를 설정하여 블로그 전체에 폰트를 적용해두었습니다.</p>
<pre><code class="language-scss">* {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;Noto Sans KR&quot;</span>, sans-serif;
}
</code></pre>
<p>그런데 이렇게 하니 수식의 숫자들이 전부 NotoSans가 되어 매우매우 보기가 싫어졌습니다. 거기다 <code>&lt;code&gt;</code>태그 역시 Consolas등 적절한 폰트 대신 NotoSans가 되어버렸습니다. 한참을 씨름하다가, 웹페이지 전체의 기본 폰트를 설정하기 위해서는 아래와 같이 해야한다는 것을 깨달았습니다.</p>
<pre><code class="language-scss"><span class="hljs-selector-tag">html</span>,
<span class="hljs-selector-tag">body</span>,
<span class="hljs-selector-id">#root</span> {
  <span class="hljs-comment">//	...other attrs</span>
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;Noto Sans KR&quot;</span>, sans-serif;
}
</code></pre>
<p><code>&lt;math&gt;</code>태그나 <code>&lt;code&gt;</code>태그는 기본 폰트를 가지고 있습니다. 위의 방법을 사용하면 기본 폰트들을 전부 덮어써버리는 데 비해, 아래 방법을 사용하면 기본 폰트가 있는 태그는 건드리지 않고 다른 태그들의 폰트만을 바꿀 수 있습니다.</p>
<h1>TMI</h1>
<h2>markdown-it-katex 버전</h2>
<p>저는 수식 렌더링에 <code>markdown-it-katex</code>라이브러리를 이용했었습니다.  근데 이 라이브러리가 제대로 동작하지 않았습니다. 유니코드(한글)이 들어가면 동작을 안 하고, 줄바꿈(//)도 작동하지 않았습니다.</p>
<p>그런데 <code>katex</code>의 데모 사이트를 확인해보면 한글과 줄바꿈 모두 잘 동작합니다. 그래서 문제를 해결하기 위해 라이브러리를 직접 뜯어봤습니다. 확인해보니 생각보다 간단한 문제였는데, 현재 0.12.0까지 나온 <code>katex</code>라이브러리를 0.6.0버전을 쓰고 있었습니다.(...4년 전 버전입니다...)</p>
<p>라이브러리 깃헙을 확인해보니 이미 <code>katex</code> 버전 업데이트에 대한 PR이 이루어졌고, PR 커밋도 이뤄졌습니다. 그런데 왠진 모르겠지만 npm에서 모듈을 다운받으면 적용이 안 돼있었습니다.</p>
<p>결국 당장에는 해결할 방법이 없어 보이기에 그냥 라이브러리를 통째로 복사해다가 수정해서 사용했습니다.</p>
<h2>KaTeX 분수 가로선</h2>
<p>그리고 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>KaTeX</mtext></mrow><annotation encoding="application/x-tex">\KaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">K</span><span class="mspace" style="margin-right:-0.17em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span>에서 작은 분수를 쓰면 가로선이 렌더링되지 않는 문제가 있었습니다. 확인해보니 가로선 굵기가  <code>0.045em</code>이었는데, 웃기게도 크롬에서 <code>0.04em</code>~<code>0.05em</code>사이 굵기의 선이 렌더링되지 않는 에러가 있었습니다. 다행히도 이럴 때를 대비해서인지 KaTeX에 가로선 최소 굵기 옵션이 있었고, 이를 사용하며 문제를 해결했습니다.</p>
</main><h1>Posts in <!-- -->blog development<!-- --> category</h1><ul><li class="post_list__OlrZL"><a href="/posts/2022-11-23-blog-dev-9/">블로그 개발을 시작하다👨‍💻[9] - Next.js</a></li><li class="post_list__OlrZL"><a href="/posts/2021-01-05-blog-dev-8/">블로그 개발을 시작하다👨‍💻[8] - 구조 개편</a></li><li class="post_listSelected__vtK9Y"><a href="/posts/2020-09-25-blog-dev-7/">블로그 개발을 시작하다👨‍💻[7] - Refactoring</a></li><li class="post_list__OlrZL"><a href="/posts/2020-08-07-blog-dev-6/">블로그 개발을 시작하다👨‍💻[6] - SEO</a></li><li class="post_list__OlrZL"><a href="/posts/2020-08-06-blog-dev-5/">블로그 개발을 시작하다👨‍💻[5] - SPA</a></li></ul><div></div></div></main><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5695206410217978" data-ad-slot="9579212903" data-ad-format="auto" data-full-width-responsive="true"></ins><footer class="footer_footer__E_Uzl">© 2020 Copyright : Unknownpgr</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"블로그 개발을 시작하다👨‍💻[7] - Refactoring","category":"blog development","date":"2020-09-25T15:56:00.000Z","postStr":"---\ntitle: 블로그 개발을 시작하다👨‍💻[7] - Refactoring\ncategory: blog development\ndate: 2020-09-25T15:56:00.000Z\n\n---\n\n얼마 전 블로그에 글을 적으려다가 큰 문제점을 하나 발견했습니다. 바로 수식이었는데요. 수학이나 물리학 관련 포스팅을 하려면 수식 입력이 필수적인데, 제 블로그 방식에서는 수식을 렌더링하기가 상당히 어려운 문제가 있었습니다. 이번에는 그 문제를 어떻게 해결했는지를 포스팅해보고자 합니다.\n![Refactoring: clean your code](refactoring-i1.png)\n\n# 기존 방식의 문제점\n\n기존에는 다음과 같은 방법으로 포스트를 렌더링했었습니다.\n\n1. 마크다운파일을 작성\n2. 마크다운파일을 html로 변환\n3. 변환된 html을 JSX로 변환\n4. JSX를 동적으로 import하여 렌더링\n\n블로그를 처음 개발할 때에는 React 기능을 최대한 이용해보고 싶었습니다. 또 React에서 html을 삽입하려면 `dangerouslySetInnerHTML`라는 속성을 이용해야 하는데, 누가 봐도 **이용하지 마시오**라는 느낌을 풍기고 있어 이 기능을 사용하지 않고 구현했었습니다. 그래서 이런 복잡한 구현 방법을 사용하게 되었는데요.\n\n이 방법의 문제점은 여러 추가 기능을 넣기가 참 힘들다는 점이었습니다. 일단 수학 식을 백엔드에서 렌더링하려고 하니, `class`를 포함한 각종 속성들을 설정해줘야 하는데 모든 속성들이 `.jsx`타입으로 잘 변환될지 장담할 수 없었습니다. 이전에 포스팅했었던 이모지 문제도 같은 맥락에서 발생하는데, html을 JSX로 변환했더니 이모지를 제대로 처리하지 못해 warning이 발생했었습니다. 이미지 처리도 상당히 번거로워서 정규표현식을 비롯한 각종 트릭을 사용해서 겨우겨우 처리했었습니다.\n\n그리고 컴파일 시간이 생각보다 길다는 문제도 있었습니다. 처음에는 `.jsx`를 `.js`로 컴파일하는 것이 금방 될 것이라고 생각했었는데, 의외로 시간이 30초~1분 이상 걸려 상당히 오랫동안 기다려야만 했었습니다. 특히 포스트 하나를 컴파일하려면 모든 파일들을 다 새로 컴파일해야 한다는 것이 치명적인 단점이었습니다.\n\n# 새로운 방식\n\n그냥 간단하게 가기로 했습니다.\n\n1. 마크다운을 작성\n2. html파일로 저장\n3. JSX에서 동적으로 로드한 html파일을 `dangerouslySetInnerHTML`속성을 이용하여 삽입 (단 동적 로드는 `import`가 아니라 `fetch`를 사용함. 즉, 재컴파일이 필요 없음.)\n\n## 새로운 방식의 장점\n\n새로운 방식을 적용하면서 사용하던 라이브러리`showdown`에서 `markdown-it`으로 바꾸었는데, 이렇게 하니 많은 장점이 생겼습니다. `markdown-it`은 두 가지 단계로 동작하는데, 하나는 markdown string을 파싱하여 token들로 나누는 단계이고, 그 다음은 이 토큰들을 다시 html로 렌더링하는 단계입니다. 이때 이 두 단계 사이에서 여러 작업을 한다면 많은 것들이 수월해집니다.\n\n### 파싱\n\n예를 들어 이전에는 Table of Content를 만들거나 이미지, 이모지 처리를 위해 완성된 html파일을 정규표현식으로 파싱했었습니다. 이 방법은 일반적으로 잘 작동했지만, 100% 작동하기란 원리적으로 불가능했습니다. html 문법은 문맥 자유 문법인데 비해, 정규표현식은 정규 문법만을 판단할 수 있기 때문입니다. 예를 들어 attribute 내부에 `\u003e`기호가 포함되었을 경우, 기존의 처리 방법은 이것을 제대로 된 태그로 인식하지 못합니다. 그런데 `markdown-it`은 제대로 된 파서를 사용하기 때문에 이런 것들을 완벽하게 구분할 수 있습니다. 따라서 특정 태그를 가져오거나 인식하기 위해서는 Token tree를 DFS하면 됩니다. 그래서 원래는 블로그 관리자 코드가 기본 200줄에 100줄정도 되는 다른 모듈을 3개정도 포함해야 했지만, 현재는 150줄 정도 되는 파일 하나로 줄어들었습니다.\n\n### Syntax Highlighter\n\n두 번째로 Syntax highlighter를 이용가능하게 되었습니다. 기존에는 코드를 입력할 때 Syntax highlight가 되지 않았는데, `markdown-it`은 `highlight.js`를 사용할 수 있는 깔끔한 방법을 제공합니다. 그래서 이제 코드 입력 시 Syntax highlight가 됩니다.\n\n```c\n// 코드 하이라이팅 예제\n#include\u003cstdio.h\u003e\n\nint main(){\n    printf(\"Hello world!\\n\");\n    return 0;\n}\n```\n\n### 수식 렌더링\n\n세 번째로 `markdown-it-katex`라는 $\\LaTeX$수식 렌더링 플러그인도 있어서 수식도 렌더링이 됩니다. $\\KaTeX$라는 웹에서 레이텍을 렌더링하기 위한 라이브러리가 있는데, 이것을 `markdown-it`에서 사용할 수 있도록 래핑해놓은 플러그인입니다. (그대로 사용하기에는 몇 가지 문제가 있어 직접 수정하여 사용했습니다. 맨 아래 TMI부분을 참조해주세요.)\n\n$$\n\\text{Let }f(x) =\\frac{f'(x)}{\\alpha}\\\\\n\\text{Then } f(x)=e^{\\frac{x}{\\alpha}}\n$$\n\n이런 간단한 수식 뿐만 아니라, $\\LaTeX$에서 지원하는 갖은 복잡한 수식들이 다 지원됩니다.\n$$\nf(x) = \\int_{-\\infty}^\\infty\\hat\\xi,e^{2 \\pi i \\xi x}\\,d\\xi\n$$\n\n### 이모지\n\n네 번째로 도대체 왜인지 모르겠지만, 이모지를 막 넣어도 오류가 안 납니다.;; 이전에는 `\u003cspan\u003e`으로 둘러주고...별 이상한 과정이 다 필요했었는데.\n\n👩‍💻👩‍💻🤘❤\n\n### 속도\n\n마지막으로 중복 컴파일이 필요없어졌습니다. 원래는 블로그 구조를 바꾸는 등 큰 작업 뿐만 아니라, 단순히 포스트 하나를 업로드하기 위해서도 블로그의 재 컴파일이 필요했었습니다. 그러나 이제는 포스트를 렌더링할 때 `import`가 아니라 `fetch`를 사용하므로 블로그 전체 구조를 바꿀 때에만 재 컴파일이 필요하고 그 외에는 컴파일 없이 블로그 포스트 작성이 가능합니다.\n\n여러가지로 얻는 게 많은 리팩토링이었습니다.\n\n# 추가로 배운 것 - 폰트 적용법\n\n저는 NotoSans폰트를 좋아해서 아래와 같이 CSS를 설정하여 블로그 전체에 폰트를 적용해두었습니다.\n\n```scss\n* {\n  font-family: \"Noto Sans KR\", sans-serif;\n}\n```\n\n그런데 이렇게 하니 수식의 숫자들이 전부 NotoSans가 되어 매우매우 보기가 싫어졌습니다. 거기다 `\u003ccode\u003e`태그 역시 Consolas등 적절한 폰트 대신 NotoSans가 되어버렸습니다. 한참을 씨름하다가, 웹페이지 전체의 기본 폰트를 설정하기 위해서는 아래와 같이 해야한다는 것을 깨달았습니다.\n\n```scss\nhtml,\nbody,\n#root {\n  //\t...other attrs\n  font-family: \"Noto Sans KR\", sans-serif;\n}\n```\n\n`\u003cmath\u003e`태그나 `\u003ccode\u003e`태그는 기본 폰트를 가지고 있습니다. 위의 방법을 사용하면 기본 폰트들을 전부 덮어써버리는 데 비해, 아래 방법을 사용하면 기본 폰트가 있는 태그는 건드리지 않고 다른 태그들의 폰트만을 바꿀 수 있습니다.\n\n# TMI\n\n## markdown-it-katex 버전\n\n 저는 수식 렌더링에 `markdown-it-katex`라이브러리를 이용했었습니다.  근데 이 라이브러리가 제대로 동작하지 않았습니다. 유니코드(한글)이 들어가면 동작을 안 하고, 줄바꿈(//)도 작동하지 않았습니다.\n\n 그런데 `katex`의 데모 사이트를 확인해보면 한글과 줄바꿈 모두 잘 동작합니다. 그래서 문제를 해결하기 위해 라이브러리를 직접 뜯어봤습니다. 확인해보니 생각보다 간단한 문제였는데, 현재 0.12.0까지 나온 `katex`라이브러리를 0.6.0버전을 쓰고 있었습니다.(...4년 전 버전입니다...)\n\n 라이브러리 깃헙을 확인해보니 이미 `katex` 버전 업데이트에 대한 PR이 이루어졌고, PR 커밋도 이뤄졌습니다. 그런데 왠진 모르겠지만 npm에서 모듈을 다운받으면 적용이 안 돼있었습니다.\n\n 결국 당장에는 해결할 방법이 없어 보이기에 그냥 라이브러리를 통째로 복사해다가 수정해서 사용했습니다.\n\n## KaTeX 분수 가로선\n\n그리고 $\\KaTeX$에서 작은 분수를 쓰면 가로선이 렌더링되지 않는 문제가 있었습니다. 확인해보니 가로선 굵기가  `0.045em`이었는데, 웃기게도 크롬에서 `0.04em`~`0.05em`사이 굵기의 선이 렌더링되지 않는 에러가 있었습니다. 다행히도 이럴 때를 대비해서인지 KaTeX에 가로선 최소 굵기 옵션이 있었고, 이를 사용하며 문제를 해결했습니다.","html":"\u003cp\u003e얼마 전 블로그에 글을 적으려다가 큰 문제점을 하나 발견했습니다. 바로 수식이었는데요. 수학이나 물리학 관련 포스팅을 하려면 수식 입력이 필수적인데, 제 블로그 방식에서는 수식을 렌더링하기가 상당히 어려운 문제가 있었습니다. 이번에는 그 문제를 어떻게 해결했는지를 포스팅해보고자 합니다.\n\u003cimg src=\"/imgs/cd1b3112e44d436d6cc08584bfe2b604.png\" alt=\"Refactoring: clean your code\"\u003e\u003c/p\u003e\n\u003ch1\u003e기존 방식의 문제점\u003c/h1\u003e\n\u003cp\u003e기존에는 다음과 같은 방법으로 포스트를 렌더링했었습니다.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e마크다운파일을 작성\u003c/li\u003e\n\u003cli\u003e마크다운파일을 html로 변환\u003c/li\u003e\n\u003cli\u003e변환된 html을 JSX로 변환\u003c/li\u003e\n\u003cli\u003eJSX를 동적으로 import하여 렌더링\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e블로그를 처음 개발할 때에는 React 기능을 최대한 이용해보고 싶었습니다. 또 React에서 html을 삽입하려면 \u003ccode\u003edangerouslySetInnerHTML\u003c/code\u003e라는 속성을 이용해야 하는데, 누가 봐도 \u003cstrong\u003e이용하지 마시오\u003c/strong\u003e라는 느낌을 풍기고 있어 이 기능을 사용하지 않고 구현했었습니다. 그래서 이런 복잡한 구현 방법을 사용하게 되었는데요.\u003c/p\u003e\n\u003cp\u003e이 방법의 문제점은 여러 추가 기능을 넣기가 참 힘들다는 점이었습니다. 일단 수학 식을 백엔드에서 렌더링하려고 하니, \u003ccode\u003eclass\u003c/code\u003e를 포함한 각종 속성들을 설정해줘야 하는데 모든 속성들이 \u003ccode\u003e.jsx\u003c/code\u003e타입으로 잘 변환될지 장담할 수 없었습니다. 이전에 포스팅했었던 이모지 문제도 같은 맥락에서 발생하는데, html을 JSX로 변환했더니 이모지를 제대로 처리하지 못해 warning이 발생했었습니다. 이미지 처리도 상당히 번거로워서 정규표현식을 비롯한 각종 트릭을 사용해서 겨우겨우 처리했었습니다.\u003c/p\u003e\n\u003cp\u003e그리고 컴파일 시간이 생각보다 길다는 문제도 있었습니다. 처음에는 \u003ccode\u003e.jsx\u003c/code\u003e를 \u003ccode\u003e.js\u003c/code\u003e로 컴파일하는 것이 금방 될 것이라고 생각했었는데, 의외로 시간이 30초~1분 이상 걸려 상당히 오랫동안 기다려야만 했었습니다. 특히 포스트 하나를 컴파일하려면 모든 파일들을 다 새로 컴파일해야 한다는 것이 치명적인 단점이었습니다.\u003c/p\u003e\n\u003ch1\u003e새로운 방식\u003c/h1\u003e\n\u003cp\u003e그냥 간단하게 가기로 했습니다.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e마크다운을 작성\u003c/li\u003e\n\u003cli\u003ehtml파일로 저장\u003c/li\u003e\n\u003cli\u003eJSX에서 동적으로 로드한 html파일을 \u003ccode\u003edangerouslySetInnerHTML\u003c/code\u003e속성을 이용하여 삽입 (단 동적 로드는 \u003ccode\u003eimport\u003c/code\u003e가 아니라 \u003ccode\u003efetch\u003c/code\u003e를 사용함. 즉, 재컴파일이 필요 없음.)\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e새로운 방식의 장점\u003c/h2\u003e\n\u003cp\u003e새로운 방식을 적용하면서 사용하던 라이브러리\u003ccode\u003eshowdown\u003c/code\u003e에서 \u003ccode\u003emarkdown-it\u003c/code\u003e으로 바꾸었는데, 이렇게 하니 많은 장점이 생겼습니다. \u003ccode\u003emarkdown-it\u003c/code\u003e은 두 가지 단계로 동작하는데, 하나는 markdown string을 파싱하여 token들로 나누는 단계이고, 그 다음은 이 토큰들을 다시 html로 렌더링하는 단계입니다. 이때 이 두 단계 사이에서 여러 작업을 한다면 많은 것들이 수월해집니다.\u003c/p\u003e\n\u003ch3\u003e파싱\u003c/h3\u003e\n\u003cp\u003e예를 들어 이전에는 Table of Content를 만들거나 이미지, 이모지 처리를 위해 완성된 html파일을 정규표현식으로 파싱했었습니다. 이 방법은 일반적으로 잘 작동했지만, 100% 작동하기란 원리적으로 불가능했습니다. html 문법은 문맥 자유 문법인데 비해, 정규표현식은 정규 문법만을 판단할 수 있기 때문입니다. 예를 들어 attribute 내부에 \u003ccode\u003e\u0026gt;\u003c/code\u003e기호가 포함되었을 경우, 기존의 처리 방법은 이것을 제대로 된 태그로 인식하지 못합니다. 그런데 \u003ccode\u003emarkdown-it\u003c/code\u003e은 제대로 된 파서를 사용하기 때문에 이런 것들을 완벽하게 구분할 수 있습니다. 따라서 특정 태그를 가져오거나 인식하기 위해서는 Token tree를 DFS하면 됩니다. 그래서 원래는 블로그 관리자 코드가 기본 200줄에 100줄정도 되는 다른 모듈을 3개정도 포함해야 했지만, 현재는 150줄 정도 되는 파일 하나로 줄어들었습니다.\u003c/p\u003e\n\u003ch3\u003eSyntax Highlighter\u003c/h3\u003e\n\u003cp\u003e두 번째로 Syntax highlighter를 이용가능하게 되었습니다. 기존에는 코드를 입력할 때 Syntax highlight가 되지 않았는데, \u003ccode\u003emarkdown-it\u003c/code\u003e은 \u003ccode\u003ehighlight.js\u003c/code\u003e를 사용할 수 있는 깔끔한 방법을 제공합니다. 그래서 이제 코드 입력 시 Syntax highlight가 됩니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 코드 하이라이팅 예제\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e#\u003cspan class=\"hljs-keyword\"\u003einclude\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\u0026lt;stdio.h\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emain\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e{\n    \u003cspan class=\"hljs-built_in\"\u003eprintf\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello world!\\n\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e수식 렌더링\u003c/h3\u003e\n\u003cp\u003e세 번째로 \u003ccode\u003emarkdown-it-katex\u003c/code\u003e라는 \u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmtext\u003eLaTeX\u003c/mtext\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\LaTeX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8988em;vertical-align:-0.2155em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord textrm\"\u003eL\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.36em;\"\u003e\u003c/span\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.6833em;\"\u003e\u003cspan style=\"top:-2.905em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord textrm mtight sizing reset-size6 size3\"\u003eA\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord textrm\"\u003eT\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.4678em;\"\u003e\u003cspan style=\"top:-2.7845em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord textrm\"\u003eE\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2155em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.125em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord textrm\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e수식 렌더링 플러그인도 있어서 수식도 렌더링이 됩니다. \u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmtext\u003eKaTeX\u003c/mtext\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\KaTeX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8988em;vertical-align:-0.2155em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord textrm\"\u003eK\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.17em;\"\u003e\u003c/span\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.6833em;\"\u003e\u003cspan style=\"top:-2.905em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord textrm mtight sizing reset-size6 size3\"\u003eA\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord textrm\"\u003eT\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.4678em;\"\u003e\u003cspan style=\"top:-2.7845em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord textrm\"\u003eE\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2155em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.125em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord textrm\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e라는 웹에서 레이텍을 렌더링하기 위한 라이브러리가 있는데, 이것을 \u003ccode\u003emarkdown-it\u003c/code\u003e에서 사용할 수 있도록 래핑해놓은 플러그인입니다. (그대로 사용하기에는 몇 가지 문제가 있어 직접 수정하여 사용했습니다. 맨 아래 TMI부분을 참조해주세요.)\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmtext\u003eLet \u003c/mtext\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmsup\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\"\u003e′\u003c/mo\u003e\u003c/msup\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmi\u003eα\u003c/mi\u003e\u003c/mfrac\u003e\u003cmspace linebreak=\"newline\"\u003e\u003c/mspace\u003e\u003cmtext\u003eThen \u003c/mtext\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsup\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmfrac\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003eα\u003c/mi\u003e\u003c/mfrac\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\text{Let }f(x) =\\frac{f\u0026#x27;(x)}{\\alpha}\\\\\n\\text{Then } f(x)=e^{\\frac{x}{\\alpha}}\n\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eLet \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.1149em;vertical-align:-0.686em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.4289em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.0037em;\"\u003eα\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.225em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.05em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.7519em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e′\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.686em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace newline\"\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eThen \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8971em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8971em;\"\u003e\u003cspan style=\"top:-3.413em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mopen nulldelimiter sizing reset-size3 size6\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.6915em;\"\u003e\u003cspan style=\"top:-2.656em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size3 size1 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.0037em;\"\u003eα\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.225em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line mtight\" style=\"border-bottom-width:0.05em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.384em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size3 size1 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.344em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter sizing reset-size3 size6\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e이런 간단한 수식 뿐만 아니라, \u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmtext\u003eLaTeX\u003c/mtext\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\LaTeX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8988em;vertical-align:-0.2155em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord textrm\"\u003eL\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.36em;\"\u003e\u003c/span\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.6833em;\"\u003e\u003cspan style=\"top:-2.905em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord textrm mtight sizing reset-size6 size3\"\u003eA\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord textrm\"\u003eT\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.4678em;\"\u003e\u003cspan style=\"top:-2.7845em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord textrm\"\u003eE\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2155em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.125em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord textrm\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e에서 지원하는 갖은 복잡한 수식들이 다 지원됩니다.\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsubsup\u003e\u003cmo\u003e∫\u003c/mo\u003e\u003cmrow\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e∞\u003c/mi\u003e\u003c/mrow\u003e\u003cmi mathvariant=\"normal\"\u003e∞\u003c/mi\u003e\u003c/msubsup\u003e\u003cmover accent=\"true\"\u003e\u003cmi\u003eξ\u003c/mi\u003e\u003cmo\u003e^\u003c/mo\u003e\u003c/mover\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmsup\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmrow\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmi\u003eπ\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003eξ\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003c/msup\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003ed\u003c/mi\u003e\u003cmi\u003eξ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ef(x) = \\int_{-\\infty}^\\infty\\hat\\xi,e^{2 \\pi i \\xi x}\\,d\\xi\n\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.3846em;vertical-align:-0.9703em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003e\u003cspan class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\"\u003e∫\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.4143em;\"\u003e\u003cspan style=\"top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e−\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e∞\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.8129em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e∞\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.9703em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord accent\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.9579em;\"\u003e\u003cspan style=\"top:-3em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.04601em;\"\u003eξ\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.2634em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"accent-body\" style=\"left:-0.1389em;\"\u003e\u003cspan class=\"mord\"\u003e^\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1944em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8991em;\"\u003e\u003cspan style=\"top:-3.113em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eπi\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.04601em;\"\u003eξ\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.04601em;\"\u003eξ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003ch3\u003e이모지\u003c/h3\u003e\n\u003cp\u003e네 번째로 도대체 왜인지 모르겠지만, 이모지를 막 넣어도 오류가 안 납니다.;; 이전에는 \u003ccode\u003e\u0026lt;span\u0026gt;\u003c/code\u003e으로 둘러주고...별 이상한 과정이 다 필요했었는데.\u003c/p\u003e\n\u003cp\u003e👩‍💻👩‍💻🤘❤\u003c/p\u003e\n\u003ch3\u003e속도\u003c/h3\u003e\n\u003cp\u003e마지막으로 중복 컴파일이 필요없어졌습니다. 원래는 블로그 구조를 바꾸는 등 큰 작업 뿐만 아니라, 단순히 포스트 하나를 업로드하기 위해서도 블로그의 재 컴파일이 필요했었습니다. 그러나 이제는 포스트를 렌더링할 때 \u003ccode\u003eimport\u003c/code\u003e가 아니라 \u003ccode\u003efetch\u003c/code\u003e를 사용하므로 블로그 전체 구조를 바꿀 때에만 재 컴파일이 필요하고 그 외에는 컴파일 없이 블로그 포스트 작성이 가능합니다.\u003c/p\u003e\n\u003cp\u003e여러가지로 얻는 게 많은 리팩토링이었습니다.\u003c/p\u003e\n\u003ch1\u003e추가로 배운 것 - 폰트 적용법\u003c/h1\u003e\n\u003cp\u003e저는 NotoSans폰트를 좋아해서 아래와 같이 CSS를 설정하여 블로그 전체에 폰트를 적용해두었습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-scss\"\u003e* {\n  \u003cspan class=\"hljs-attribute\"\u003efont-family\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Noto Sans KR\u0026quot;\u003c/span\u003e, sans-serif;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그런데 이렇게 하니 수식의 숫자들이 전부 NotoSans가 되어 매우매우 보기가 싫어졌습니다. 거기다 \u003ccode\u003e\u0026lt;code\u0026gt;\u003c/code\u003e태그 역시 Consolas등 적절한 폰트 대신 NotoSans가 되어버렸습니다. 한참을 씨름하다가, 웹페이지 전체의 기본 폰트를 설정하기 위해서는 아래와 같이 해야한다는 것을 깨달았습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-scss\"\u003e\u003cspan class=\"hljs-selector-tag\"\u003ehtml\u003c/span\u003e,\n\u003cspan class=\"hljs-selector-tag\"\u003ebody\u003c/span\u003e,\n\u003cspan class=\"hljs-selector-id\"\u003e#root\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e//\t...other attrs\u003c/span\u003e\n  \u003cspan class=\"hljs-attribute\"\u003efont-family\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Noto Sans KR\u0026quot;\u003c/span\u003e, sans-serif;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;math\u0026gt;\u003c/code\u003e태그나 \u003ccode\u003e\u0026lt;code\u0026gt;\u003c/code\u003e태그는 기본 폰트를 가지고 있습니다. 위의 방법을 사용하면 기본 폰트들을 전부 덮어써버리는 데 비해, 아래 방법을 사용하면 기본 폰트가 있는 태그는 건드리지 않고 다른 태그들의 폰트만을 바꿀 수 있습니다.\u003c/p\u003e\n\u003ch1\u003eTMI\u003c/h1\u003e\n\u003ch2\u003emarkdown-it-katex 버전\u003c/h2\u003e\n\u003cp\u003e저는 수식 렌더링에 \u003ccode\u003emarkdown-it-katex\u003c/code\u003e라이브러리를 이용했었습니다.  근데 이 라이브러리가 제대로 동작하지 않았습니다. 유니코드(한글)이 들어가면 동작을 안 하고, 줄바꿈(//)도 작동하지 않았습니다.\u003c/p\u003e\n\u003cp\u003e그런데 \u003ccode\u003ekatex\u003c/code\u003e의 데모 사이트를 확인해보면 한글과 줄바꿈 모두 잘 동작합니다. 그래서 문제를 해결하기 위해 라이브러리를 직접 뜯어봤습니다. 확인해보니 생각보다 간단한 문제였는데, 현재 0.12.0까지 나온 \u003ccode\u003ekatex\u003c/code\u003e라이브러리를 0.6.0버전을 쓰고 있었습니다.(...4년 전 버전입니다...)\u003c/p\u003e\n\u003cp\u003e라이브러리 깃헙을 확인해보니 이미 \u003ccode\u003ekatex\u003c/code\u003e 버전 업데이트에 대한 PR이 이루어졌고, PR 커밋도 이뤄졌습니다. 그런데 왠진 모르겠지만 npm에서 모듈을 다운받으면 적용이 안 돼있었습니다.\u003c/p\u003e\n\u003cp\u003e결국 당장에는 해결할 방법이 없어 보이기에 그냥 라이브러리를 통째로 복사해다가 수정해서 사용했습니다.\u003c/p\u003e\n\u003ch2\u003eKaTeX 분수 가로선\u003c/h2\u003e\n\u003cp\u003e그리고 \u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmtext\u003eKaTeX\u003c/mtext\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\KaTeX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8988em;vertical-align:-0.2155em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord textrm\"\u003eK\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.17em;\"\u003e\u003c/span\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.6833em;\"\u003e\u003cspan style=\"top:-2.905em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord textrm mtight sizing reset-size6 size3\"\u003eA\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord textrm\"\u003eT\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.4678em;\"\u003e\u003cspan style=\"top:-2.7845em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord textrm\"\u003eE\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2155em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.125em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord textrm\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e에서 작은 분수를 쓰면 가로선이 렌더링되지 않는 문제가 있었습니다. 확인해보니 가로선 굵기가  \u003ccode\u003e0.045em\u003c/code\u003e이었는데, 웃기게도 크롬에서 \u003ccode\u003e0.04em\u003c/code\u003e~\u003ccode\u003e0.05em\u003c/code\u003e사이 굵기의 선이 렌더링되지 않는 에러가 있었습니다. 다행히도 이럴 때를 대비해서인지 KaTeX에 가로선 최소 굵기 옵션이 있었고, 이를 사용하며 문제를 해결했습니다.\u003c/p\u003e\n","imageMapping":{"refactoring-i1.png":"/imgs/cd1b3112e44d436d6cc08584bfe2b604.png"},"name":"2020-09-25-blog-dev-7"},"postsInSameCategory":[{"name":"2022-11-23-blog-dev-9","title":"블로그 개발을 시작하다👨‍💻[9] - Next.js","date":"2022-11-23T07:16:20.388Z","category":"blog development"},{"name":"2021-01-05-blog-dev-8","title":"블로그 개발을 시작하다👨‍💻[8] - 구조 개편","date":"2021-01-05T05:34:01.406Z","category":"blog development"},{"name":"2020-09-25-blog-dev-7","title":"블로그 개발을 시작하다👨‍💻[7] - Refactoring","date":"2020-09-25T15:56:00.000Z","category":"blog development"},{"name":"2020-08-07-blog-dev-6","title":"블로그 개발을 시작하다👨‍💻[6] - SEO","date":"2020-08-07T21:18:27.674Z","category":"blog development"},{"name":"2020-08-06-blog-dev-5","title":"블로그 개발을 시작하다👨‍💻[5] - SPA","date":"2020-08-06T22:06:33.625Z","category":"blog development"}]},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"2020-09-25-blog-dev-7"},"buildId":"c6ZW1ObeHHBx5BnsTEltR","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>