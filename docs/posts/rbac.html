<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2084bca457b52fa2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2084bca457b52fa2.css" data-n-g=""/><link rel="preload" href="/_next/static/css/76f782842fc30c98.css" as="style"/><link rel="stylesheet" href="/_next/static/css/76f782842fc30c98.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-a455256c0236c590.js" defer=""></script><script src="/_next/static/chunks/pages/_app-50a6bd5804e0fb30.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-a1c54eb5554d38fe.js" defer=""></script><script src="/_next/static/K3lEM_jkV_7gNUxDelP2D/_buildManifest.js" defer=""></script><script src="/_next/static/K3lEM_jkV_7gNUxDelP2D/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="header_header__n6agz"><h1>[UNKNOWN-PGR]</h1><div><a class="header_nav__JpY1D" href="/">MAIN</a><a class="header_nav__JpY1D" href="/about">ABOUT</a></div></div><main class="layout_main__j5lor"><div><h1 class="post_title__aQveY">RBAC 구현</h1><main class="post_main__mmVmG"><blockquote>
<p>이 글은 <a href="https://csrc.nist.gov/CSRC/media/Projects/Role-Based-Access-Control/documents/ferraiolo-kuhn-92.pdf">Role-Based Access Control</a> (1992)를 참고하여 작성하였습니다.</p>
</blockquote>
<p>저는 지금 제가 속한 동아리의 홈페이지 개선 작업을 하고 있습니다. 기존의 홈페이지는 PHP 언어로 작성된 XE기반이었습니다. XE는 버전 1이 1999년에 발표되었고 2009년에 유지보수가 중단되었습니다. 즉, 엄청 오래된 시스템입니다.</p>
<p>저는 관리자 페이지에 들어가면 warning이 백만 개가 뜨는 이 상황을 참지 못하고 (거의 20년만에) 홈페이지를 Node.js 기반의 시스템으로 이전하기로 결심했습니다. 그러다 권한 시스템을 구현해야 하는 문제에 부딛혔습니다. 동아리 홈페이지가 단순한 게시판이라면 그렇게 크게 고민하지 않았겠지만, 동아리 홈페이지에는 대회 신청 기능을 포함하여 수많은 기능들이 들어 있습니다. 저는 이 기능들을 모두 깔끔하게 제어할 수 있는, 그러면서도 모듈로 따로 분리되어 유저 시스템이나 게시판 시스템을 비롯한 다른 시스템들에 대한 종속성이 없는 권한 시스템을 개발하고 싶었습니다.</p>
<p>그런데 저는 평소에 AWS나 쿠버네티스를 다루면서 이러한 시스템들이 RBAC를 사용한다는 것을 알고 있었으며, 따라서 RBAC가 AWS와 같이 복잡한 시스템에 적용하기 적합함을 알고 있었습니다. 그래서 이를 공부하여 동아리 홈페이지에 적용하기로 결정했습니다. 그리고 실제로 구현을 해 보니 RBAC를 구현하는 것이 생각보다 재미있는 과정이어서, 제가 공부한 내용과 그 구현 과정을 정리해두고자 합니다.</p>
<h1>Role-Based Access Control (RBAC)이란?</h1>
<p>RBAC란 1992년 David F. Ferraiolo and D. Richard Kuhn 이 <a href="https://csrc.nist.gov/CSRC/media/Projects/Role-Based-Access-Control/documents/ferraiolo-kuhn-92.pdf">Role-Based Access Control</a> 논문에서 제시한, 접근 제어(Access Control) 방법의 하나입니다. 그 이전에는 Mandatory Access Control(MAC), Discretionary Access Controls (DAC)가 일반적으로 군사, 혹은 정부에서 쓰기 적합한 접근 제어 체계로 여겨졌습니다. 그러나 위 논문에서는 DAC를 위한 이론적 기반이 명확하지 않으며 상업적, 혹은 정부를 위한 조직에서 사용하기에 부적합하다고 주장하며 새로운 방식의 비임의적(non-discretionary) 접근방식인 Role-Based Access Control (RBAC)를 제안했습니다.</p>
<p>따라서 RBAC를 이해하기 위해서는 기존의 DAC가 어떤 문제점을 가지고 있는지 알아볼 필요가 있습니다. DAC는 Unix filesystem과 비슷하게 모든 대상에 소유자 (Owner)를 부여한 후 이 소유자가 해당 오브젝트를 마음대로 조작할 수 있는 방식입니다. DAC는 일반적으로 임의 접근 제어라 번역되지만, 이런 맥락에서 저는 이를 재량 기반 접근 제어라 번역하고 싶습니다. 왜냐하면 오브젝트에 대한 <strong>모든</strong> 권한을 소유자의 재량에 맡기기 때문입니다. 예컨대 어떤 소유자가 다른 소유자에게 소유를 이전할 수 있으며 소유한 오브젝트의 접근 권한도 마음대로 변경할 수 있습니다.</p>
<p>그런데 많은 조직에서는 실제 유저가 '접근 권한에 대한 정보'를 '소유'하지 않습니다. 즉 오브젝트에 접근하는 것이 가능할지라도 그 오브젝트에 대한 접근 권한 자체를 남에게 넘기는 것은 불가능합니다. 실제로 '접근 권한'을 관리하는 것은 시스템, 혹은 허가받은 관리자입니다.</p>
<p>이때 일반적으로 접근 제한은 (유저의 오브젝트의 소유 여부와 다르게) 유저가 조직 내에서 속한 역할에 의해 결정됩니다. 예를 들어 병원의 경우 의사, 간호사, 치료사, 약사 등의 역할이 있을 것이고, 은행의 경우 출납원, 대출 담당자, 회계사 등의 역할이 있을 것입니다. 이러한 역할은 군사 체계에도 적용될 수 있습니다. 예를 들어 표적 분석가, 상황 분석가, 교통 분속가 등이 전술 시스템에서 일반적인 역할입니다.</p>
<p><strong>...이까지는 거의 논문을 번역한 것이었고, 이 이후부터 본격적인 설명이 나옵니다만 그대로 옮기면 이해하기 어려운 글이 될 것 같아 제 마음대로 쓰겠습니다.</strong></p>
<p>위 문단에서 저자가 하고 싶었던 말은 이것입니다. 기존 DAC에서는 '소유자 기반' 의 접근 제어가 이루어졌고, 소유권을 타인에게 이전하는 것 등이 가능하므로 권한 제어가 너무 허술하다는 문제가 있습니다. 예를 들어 어떤 중요한 직책을 가진 사람이 잘못하여 기밀 파일의 소유권을 다른 사람에게 넘긴다면 큰 문제가 발생할 것입니다. 그러나 이러한 접근 방법과 다르게 조직 내의 역할을 고려하여 일반적으로 같은 역할을 가진 사용자들은 같은 권한을 가지고 있다는 것에 착안,</p>
<ol>
<li>역할을 정의하고 (e.g. 관리자, 일반 사용자, 동아리 정회원 등)</li>
<li>권한을 정의한 후 (e.g. 관리자 페이지 접근, 정회원 게시판 읽기, 자유게시판 읽기 등)</li>
<li>각 역할에 권한을 할당하고</li>
<li>각 역할에 유저를 할당하면</li>
</ol>
<p>이러한 문제가 깔끔하게 해결됩니다. 이와 같이 유저와 권한을 연결하는 것을 역할 관계로 해석한 것이 역할 기반 접근 제어입니다.</p>
<h2>RBAC에 대한 개인적 해석</h2>
<p>위 논문에서는 DAC의 문제점을 해결하는 하나의 다른 방식으로써 RBAC를 제안했습니다. 그러나 저는 RBAC를 이상적인 권한 시스템에 대한 대안으로 해석했습니다.</p>
<p>이상적인 권한 시스템은 모든 유저에 대한 모든 권한을 설정할 수 있는 시스템입니다. 그러므로 권한이 N개 있고 유저가 M명이 있을 경우 최대 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="7.153ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 3161.4 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1110.2,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2110.4,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>×</mo><mi>M</mi></math></mjx-assistive-mml></mjx-container>개의 릴레이션이 필요합니다.</p>
<p>그런데 이것을 관리자가 모두 관리하는 것은 거의 불가능합니다. 왜냐하면 관리해야 할 권한 정보가 너무나 많기 때문입니다. 예를 들어 유저가 1000명이고 관리해야 할 권한이 20개인 경우만 생각하더라도 설정해야 할 권한은 2만 개나 됩니다. 물론 그런 현실적인 문제 말고 공간복잡도만 보더라도 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.873ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3480 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2040,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(3091,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>M</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container> 에 해당하므로 너무 큽니다.</p>
<p>이때 일반적인 시스템이라면 모든 유저가 서로 다른 권한을 가지지는 않을 것입니다. 그러므로 같은 권한을 가진 유저들을 그룹으로 묶어 관리하면 필요한 릴레이션을 줄일 수 있습니다. 예컨대 같은 권한을 가지는 유저들을 묶어 보았더니 K개의 그룹이 나왔다고 가정해봅시다. 그러면</p>
<ol>
<li>각 유저가 속한 그룹이 무엇인지, 즉 유저-그룹의 관계와</li>
<li>각 그룹이 어떤 권한을 가지는지,즉 그룹-권한의 관계만</li>
</ol>
<p>저장하면 됩니다. 그러므로 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="33.414ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 14768.8 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1110.2,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2110.4,0)"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(3221.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(4221.9,0)"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(5333.1,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(6333.3,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(7662.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(8717.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(9106.9,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(10217.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(11217.3,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(12268.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(12879.6,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(13879.8,0)"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>×</mo><mi>K</mi><mo>+</mo><mi>K</mi><mo>×</mo><mi>M</mi><mo>=</mo><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>M</mi><mo stretchy="false">)</mo><mo>×</mo><mi>K</mi></math></mjx-assistive-mml></mjx-container>개의 릴레이션만이 필요합니다. 아까의 예시에서 그룹이 4개정도 나왔다고 가정해보면 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="22.752ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 10056.4 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width: 3;"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1611.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mn" transform="translate(2611.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)" style="stroke-width: 3;"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)" style="stroke-width: 3;"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1500,0)" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(4611.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(5222.7,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mn" transform="translate(6222.9,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(7000.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"></path></g><g data-mml-node="mn" transform="translate(8056.4,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" style="stroke-width: 3;"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)" style="stroke-width: 3;"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(1000,0)" style="stroke-width: 3;"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1500,0)" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mn>20</mn><mo>+</mo><mn>1000</mn><mo stretchy="false">)</mo><mo>×</mo><mn>4</mn><mo>=</mo><mn>4080</mn></math></mjx-assistive-mml></mjx-container>개의 릴레이션만이 필요함 알 수 있습니다. 아까의 2만 개에 비하면 개수가 훨씬 줄었습니다. 심지어 이는 유저가 한 번에 여러 개의 그룹에 속할 수도 있다고 가정한 것입니다. 만약 유저가 속할 수 있는 그룹을 하나로 제한하면 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="11.93ex" height="1.731ex" role="img" focusable="false" viewBox="0 -683 5272.9 765" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1110.2,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2110.4,0)"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(3221.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(4221.9,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>×</mo><mi>K</mi><mo>+</mo><mi>M</mi></math></mjx-assistive-mml></mjx-container>개의 릴레이션만이 필요하며, 이전의 예시로 계산해보면 1080개의 릴레이션이면 충분합니다.</p>
<blockquote>
<p>물론 DAC도 이상적인 권한 시스템에 대한 대안으로 해석할 수 있습니다. 이 경우 권한을 유저(<mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.009ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 888 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi></math></mjx-assistive-mml></mjx-container>)의 리소스(<mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.378ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 1051 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi></math></mjx-assistive-mml></mjx-container>)에 대한 행동(<mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.011ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 889 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>K</mi></math></mjx-assistive-mml></mjx-container>)로 해석한 것으로, <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="11.93ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 5272.9 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1110.2,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2110.4,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(3383.7,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(4383.9,0)"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>×</mo><mi>M</mi><mo>×</mo><mi>K</mi></math></mjx-assistive-mml></mjx-container>개의 릴레이션을 모두 관리할 수가 없으니 모든 리소스에 소유자를 할당한 후, 해당 소유자가 해당 리소스에 대한 모든 행위를 수행할 수 있는 것으로 해석하는 것입니다. 그러면 소유자-리소스 관계 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.378ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 1051 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi></math></mjx-assistive-mml></mjx-container>개만 저장하면 됩니다. 그러나 이 경우 어떤 리소스의 소유자에 대해 특정 행위만을 골라 제한하는 것이 불가능하다는 단점이 있습니다.</p>
</blockquote>
<h2>RBAC 모델의 구성 및 수학적 표현</h2>
<p>RBAC 모델에서는 아래와 같은 5개의 주요한 구성 요소가 있습니다.</p>
<ul>
<li>어떤 행위(function)이 가능한지에 대한 여부를 '권한 (<strong>P</strong>ermission)'</li>
<li>어떤 권한을 행위를 행사할 수 있는 주체를 '주체 (<strong>S</strong>ubject)'</li>
<li>특정한 권한들을 가진 대상의의 그룹을 '역할 (<strong>R</strong>ole)'</li>
</ul>
<p>이라고 부르며, 보통 약어로 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.699ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 751 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi></math></mjx-assistive-mml></mjx-container>, <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.459ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 645 727" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></mjx-assistive-mml></mjx-container>, <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.048ex;" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="1.593ex" role="img" focusable="false" viewBox="0 -683 759 704" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi></math></mjx-assistive-mml></mjx-container>이라 씁니다.</p>
<p>그리고</p>
<ul>
<li>어떤 Permission이 어떤 Role에 할당되었는지, 즉 권한-역할 관계를 <strong>P</strong>ermission <strong>A</strong>ssignment</li>
<li>어떤 Subject가 어떤 Role에 할당되었는지, 즉 주체-역할 관계를 <strong>S</strong>ubject <strong>A</strong>ssignment</li>
</ul>
<p>이라고 부르며 보통 약어로 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="3.396ex" height="1.62ex" role="img" focusable="false" viewBox="0 -716 1501 716" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(751,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>A</mi></math></mjx-assistive-mml></mjx-container>, <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="3.156ex" height="1.67ex" role="img" focusable="false" viewBox="0 -716 1395 738" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(645,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mi>A</mi></math></mjx-assistive-mml></mjx-container>라 씁니다.</p>
<blockquote>
<p>그리고 <strong>T</strong>ransaction (T), <strong>R</strong>ole <strong>H</strong>ierarchy (RH) 등이 있지만 이는 지금은 다루지 않겠습니다.</p>
</blockquote>
<p>그리고 이들은 모두 집합으로 표현할 수 있습니다.</p>
<ul>
<li><mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.699ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 751 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi></math></mjx-assistive-mml></mjx-container>, <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.459ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 645 727" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></mjx-assistive-mml></mjx-container>, <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.048ex;" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="1.593ex" role="img" focusable="false" viewBox="0 -683 759 704" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi></math></mjx-assistive-mml></mjx-container>은 모두 단순한 집합으로 생각할 수 있으며</li>
<li><mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="12.595ex" height="1.71ex" role="img" focusable="false" viewBox="0 -716 5567 756" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(751,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1778.8,0)"><path data-c="2282" d="M84 250Q84 372 166 450T360 539Q361 539 370 539T395 539T430 540T475 540T524 540H679Q694 532 694 520Q694 511 681 501L522 500H470H441Q366 500 338 496T266 472Q244 461 224 446T179 404T139 337T124 250V245Q124 157 185 89Q244 25 328 7Q348 2 366 2T522 0H681Q694 -10 694 -20Q694 -32 679 -40H526Q510 -40 480 -40T434 -41Q350 -41 289 -25T172 45Q84 127 84 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2834.6,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(3807.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(4808,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>A</mi><mo>⊂</mo><mi>P</mi><mo>×</mo><mi>R</mi></math></mjx-assistive-mml></mjx-container>이고</li>
<li><mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="12.115ex" height="1.71ex" role="img" focusable="false" viewBox="0 -716 5355 756" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(645,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1672.8,0)"><path data-c="2282" d="M84 250Q84 372 166 450T360 539Q361 539 370 539T395 539T430 540T475 540T524 540H679Q694 532 694 520Q694 511 681 501L522 500H470H441Q366 500 338 496T266 472Q244 461 224 446T179 404T139 337T124 250V245Q124 157 185 89Q244 25 328 7Q348 2 366 2T522 0H681Q694 -10 694 -20Q694 -32 679 -40H526Q510 -40 480 -40T434 -41Q350 -41 289 -25T172 45Q84 127 84 250Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2728.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(3595.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(4596,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mi>A</mi><mo>⊂</mo><mi>S</mi><mo>×</mo><mi>R</mi></math></mjx-assistive-mml></mjx-container>입니다.</li>
</ul>
<h1>구현</h1>
<p>위 시스템은 보는 바와 같이 굉장히 간단합니다. 그러나 개념적인 구조와 실제 구현은 거리가 좀 멀었습니다.</p>
<p>먼저 시스템 구현에 앞서 저는 아래와 같은 목표를 설정했습니다.</p>
<ul>
<li>RBAC 시스템을 고안한다.</li>
<li>이 시스템은 독립된 모듈로 존재하며, 유저 모델이나 게시판, 대회 신청 등 다른 시스템에 종속성을 가지지 않는다.</li>
<li>모듈을 사용하는 것은 최대한 간단하게 한다. 즉, 모듈을 사용하기 위해서 추가해야 하는 코드를 최소한으로 한다.</li>
<li>시스템은 관계형 데이터베이스를 사용한다.</li>
<li>DB나 소스코드를 전혀 건드리지 않고도 (CLI 툴이나 웹 대시보드 형태로) 권한 설정이 가능해야만 한다.</li>
</ul>
<p>이는 제가 관리하는 서비스가 동아리 홈페이지 서비스였기 때문입니다. 동아리 홈페이지 서비스는 저 혼자 관리하는 것이 아니라 미래에 다른 후배들이 관리하게 될 것이고, 그 중에서는 컴퓨터 전공이 아닌 학생도 많이 있을 것입니다. 그런데 동접자가 100명도 나오지 않는 서비스임에도 Redis같은 기술을 도입하면 관리 포인트가 늘어날 것이고, 백업도 힘들 것입니다. (DB 전체를 백업하는 스크립트는 이미 있어 간단히 백업이 가능한 상황입니다.) 또한 권한 설정 등을 위해 소스코드를 수정하는 것은 그 자체로 좋지 못한 구현임이 분명합니다. 종속성 제거나 모듈화 등도 같은 맥락입니다.</p>
<p>그런데 이러한 조건들을 설정한 후에 구현을 하려고 하니 다음과 같은 여러 문제가 발생했습니다.</p>
<h2>권한들의 목록을 어떻게 가져오는가?</h2>
<p>위 시스템에서는 어쨌든 다섯 개의 집합이 필요합니다. <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="15.452ex" height="2.059ex" role="img" focusable="false" viewBox="0 -716 6829.7 910" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(751,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(1195.7,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1840.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2285.3,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(3044.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(3489,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(4240,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(4990,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(5434.7,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(6079.7,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo>,</mo><mi>S</mi><mo>,</mo><mi>R</mi><mo>,</mo><mi>P</mi><mi>A</mi><mo>,</mo><mi>S</mi><mi>A</mi></math></mjx-assistive-mml></mjx-container> 입니다. 그런데 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.459ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 645 727" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></mjx-assistive-mml></mjx-container>는 그냥 기존의 유저 모델을 그대로 가져온다고 치고, <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.048ex;" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="1.593ex" role="img" focusable="false" viewBox="0 -683 759 704" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi></math></mjx-assistive-mml></mjx-container>은 그냥 컬럼 하나짜리 (Role에 대한 설명을 추가한다면 두 개짜리) 테이블입니다. <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="3.396ex" height="1.62ex" role="img" focusable="false" viewBox="0 -716 1501 716" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(751,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>A</mi></math></mjx-assistive-mml></mjx-container>나 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="3.156ex" height="1.67ex" role="img" focusable="false" viewBox="0 -716 1395 738" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(645,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mi>A</mi></math></mjx-assistive-mml></mjx-container>는 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="6.888ex" height="2.034ex" role="img" focusable="false" viewBox="0 -705 3044.3 899" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(751,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(1195.7,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(1954.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(2399.3,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo>,</mo><mi>R</mi><mo>,</mo><mi>S</mi></math></mjx-assistive-mml></mjx-container>가 있으면 간단하게 컬럼 두 개짜리 테이블 두 개로 표현할 수 있습니다. 그런데 결정적인 문제는 집합 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.699ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 751 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi></math></mjx-assistive-mml></mjx-container>를 어떻게 가져오냐는 것이었습니다.</p>
<p>먼저 집합 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.699ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 751 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi></math></mjx-assistive-mml></mjx-container>가 다른 집합과 다르게 데이터베이스에 저장될 수 없음을 금방 깨달았습니다. 왜냐하면 만약 그렇게 된다면 소스코드를 수정하여 새로운 API를 추가하거나 삭제할 때마다 데이터베이스를 직접 건드려서 권한을 조정해줘야 하기 때문입니다. 이는 정말로 비효율적이고 오류가 발생하기 쉬운 구조입니다. 그래서 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.699ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 751 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi></math></mjx-assistive-mml></mjx-container>는 서버가 실행된 이후 런타임에 동적으로 조회 시마다 생성하는 방식을 택하기로 했습니다.</p>
<p>그리고 나서 처음 생각한 것은 API와 권한을 1:1 대응시키는 것이었습니다. 그러면 API들의 리스트를 가져오면 곧 이것이 권한의 리스트가 되고, 이것은 Koa의 route를 가져오는 기능을 사용하면 쉽게 해결할 수 있습니다. 즉, 서버가 시작될 때 자기 자신의 API의 리스트를 가져온 후 이것을 <mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.699ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 751 683" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi></math></mjx-assistive-mml></mjx-container>라고 두는 것입니다.</p>
<p><strong>그런데</strong> 동아리 홈페이지를 보면 어떤 게시판에는 모든 유저가 접근 가능하고 어떤 게시판에는 정회원만 접근할 수 있습니다. 즉, 같은 게시판 API를 호출하더라도 권한이 서로 다를 수 있습니다. 그러므로 이 방법은 사용할 수 없습니다. 이는 정말로 해결하기 어려운 문제였습니다. 그래서 다른 권한 구현 라이브러리들을 참고하였고, <a href="https://casbin.org/">Casbin</a> 라이브러리를 참고하여 도움을 얻을 수 있었습니다. 바로 권한을 '행위 (Actions)'와 '대상 (Objects)'으로 나눈 후 이것의 곱집합을 권한으로 사용한다는 아이디어였습니다. 예컨대 게시판의 권한을 예로 들자면 아래와 같습니다.</p>
<pre><code>- 행위 = ['글 목록 읽기', '글 읽기', '글 쓰기']
- 대상 = ['정회원 게시판', '자유게시판']
- 권한 = 대상 × 행위 = [
  ('정회원 게시판', '글 목록 읽기'), ('정회원 게시판', '글 읽기'), ('정회원 게시판', '글 쓰기'),
  ('자유게시판', '글 목록 읽기'), ('자유게시판', '글 읽기'), ('자유게시판', '글 쓰기')
  ]
</code></pre>
<p>Casbin 라이브러리에서는 이를 특수한 형식의 파일로 구현했지만, 저는 이 방법이 마음에 들지 않았습니다. 왜냐하면 관리자가 카테고리를 추가하거나 삭제할 경우 해당 파일도 마찬가지로 수정해주어야 하는데 이는 매우 비효율적이기 때문입니다. 그래서 저는 RBAC 시스템이 '행위'의 목록과 '대상'의 목록을 받아 이들의 곱집합을 자동으로 생성하도록 구성했습니다.</p>
<p>물론 경우에 따라 '대상'이 필요 없는 경우도 있습니다. 예를 들어 (관리자 역할이 사용할 수 있는) '유저 삭제 가능' 기능은 그냥 유저 삭제가 가능하거나 불가능한거나 둘 중 하나일 뿐, 특정 유저만을 삭제할 수 있도록 상세한 권한을 줄 필요는 없습니다. 이런 경우는 '대상' 목록을 <code>null</code>로 주면 그냥 '행위'의 목록을 그대로 권한으로 사용하도록 구현했습니다.</p>
<p>그런데 시스템을 이렇게 구성할 경우 사소한 문제점이 발생합니다. 바로 의미 없는 권한이 생길 수 있다는 점입니다. 예를 들어서 쪽지 보내기 권한과 게시판 권한을 아래와 같이 한 번에 표현한다고 가정해봅시다.</p>
<pre><code>- 행위 = ['쪽지 보내기', '글 읽기', '글 쓰기']
- 대상 = ['자유게시판', '정회원 게시판']
</code></pre>
<p>그러면 실제로는 아무 의미가 없는 <code>자유 게시판 쪽지 보내기(?)</code> 등의 권한이 만들어지게 됩니다. 그러므로 모든 행위와 모든 대상의 곱집합을 구하는 것이 아니라 특정 행위들과 특정 대상들의 곱집합들만이 가능하게 제한할 수 있도록 permission들을 모듈로 다시 분리했습니다. 즉, 권한은 <code>(Module, Action, Object)</code> 의 튜플입니다.</p>
<p>어떤 사람들은 모든 연산을 'CRUD' 로 통일하여 RESTful하게 만들면 되지 않겠느냐고 생각할 수도 있습니다. 그런데 실제로 해 보면 상당히 이상한 문제가 많이 발생합니다. 예를 들어 '게시판의 존재를 알 수 있는 권한', 즉 홈페이지에 접속했을 경우 해당 게시판을 게시판 리스트에서 볼 수 있는 권한이 있습니다. 이 권한은 물론 'Read'에 속할 것입니다. 그런데 '게시판에 속한 글들을 읽을 수 있는 권한'은 또 다른 권한인데, 이 또한 CRUD로 표현하자니 Read에 해당합니다. 또는 관리자가 게시판을 추가할 수 있는 권한이 있을 텐데, 이는 CRUD에서 Create에 해당합니다. 그런데 일반 유저가 게시판 내부에 글을 작성할 수 있는 권한 역시 Create에 해당합니다. 즉, CRUD로 표현하게 되면 여러 권한들이 겹쳐서 유일하게 구분되지 않는 경우가 발생할 수도 있습니다. 그 외에도 모든 리소스가 CRUD 4가지를 모두 사용하는 것은 아님을 비롯하여 다양한 문제가 있습니다.</p>
<blockquote>
<p>물론 API 구조를 매우 RESTful하게 짜면 이를 해결할 수도 있을 것입니다. 그러나 REST에 너무 집착하게 되면 일반성을 상당히 잃게 됩니다. 예컨대 로그인 / 로그아웃을 <code>POST /session</code> 과 <code>DELETE /session</code> 과 같이 표현할 수 있지만, 차라리 RESTful하지 않게 <code>POST /login</code> , <code>DELETE(or POST or GET) /logout</code> 으로 사용하는 것과 마찬가지입니다.</p>
</blockquote>
<p>그래서 저는 아래와 같이 권한 모듈을 구현했습니다.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">PostPermission</span> = <span class="hljs-variable constant_">RBAC</span>.<span class="hljs-title function_">getRBACModule</span>(<span class="hljs-string">&#x27;post&#x27;</span>, [<span class="hljs-string">&#x27;read&#x27;</span>, <span class="hljs-string">&#x27;delete&#x27;</span>, <span class="hljs-string">&#x27;update&#x27;</span>]);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MenuPermission</span> = <span class="hljs-variable constant_">RBAC</span>.<span class="hljs-title function_">getRBACModule</span>(<span class="hljs-string">&#x27;menu&#x27;</span>,
                                          [<span class="hljs-string">&#x27;list&#x27;</span>, <span class="hljs-string">&#x27;write&#x27;</span>], <span class="hljs-comment">// Actions</span>
                                          [<span class="hljs-string">&#x27;free-board&#x27;</span>, <span class="hljs-string">&#x27;member-board&#x27;</span>] <span class="hljs-comment">// Objects</span>
                                         );
</code></pre>
<p>이때 위 예시의 <code>CategoryPermission</code>처럼 카테고리들을 리스트로 관리한다면 파일로 관리하는 것과 아무 차이가 없습니다. 즉 관리자가 카테고리를 추가할 때마다 저 리스트에 카테고리를 추가해야 합니다. 그러므로 아래와 같이 카테고리 목록을 데이터베이스에서 가져오도록 구현했습니다.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MenuPermission</span> = <span class="hljs-variable constant_">RBAC</span>.<span class="hljs-title function_">getRBACModule</span>(<span class="hljs-string">&#x27;menu&#x27;</span>, [<span class="hljs-string">&#x27;list&#x27;</span>, <span class="hljs-string">&#x27;write&#x27;</span>], <span class="hljs-keyword">async</span> knex =&gt; {
  <span class="hljs-keyword">const</span> menus = <span class="hljs-keyword">await</span> knex.<span class="hljs-title function_">select</span>(<span class="hljs-string">&#x27;menu_pk&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>).<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;menu&#x27;</span>);
  <span class="hljs-keyword">return</span> menus.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> ({ <span class="hljs-attr">id</span>: x.<span class="hljs-property">menu_pk</span>, <span class="hljs-attr">description</span>: x.<span class="hljs-property">name</span> }));
});
</code></pre>
<p>또한 여기서 object는 실제 object 전체가 아니라 데이터베이스에서 기본 키를 의미합니다. 그런데 object의 기본 키만을 보여준다면 관리자가 권한을 설정하기 어려울 것입니다. 그래서 위와 같이 문자열의 리스트 대신 <code>{id, description}</code> 의 리스트를 공급하도록 하여 관리자가 볼 때에는 id와 description이 함께 보이도록 구현했습니다.</p>
<blockquote>
<p>별로 중요한 것은 아니지만, 실제로는 objects로 <code>Object[]</code>, <code>Promise&lt;Object[]&gt;</code>, <code>function =&gt; Promise&lt;Object[]&gt;</code> 를 입력받을 수 있도록 구현했습니다.</p>
<p>그리고 위 구현에서 관리자가 서버 실행 중에 카테고리를 변경하는 것을 반영하기 위해 해당 쿼리가 매 메뉴 조회마다 발생한다고 생각할 수도 있습니다. 그러나 실제로 권한 검사 때 조회되는 것은 PA이지 P가 아닙니다. 그러므로 위 메뉴 리스트 조회는 관리자 페이지에서 관리자가 권한을 설정하기 위해 권한 목록을 불러오는 경우에만 조회됩니다.</p>
<p>그리고 위 예시에서는 object 목록을 공급할 때 권한 모듈 내부에서 공급된 knex connection을 사용합니다. 그러나 이는 제가 권한 모델과 유저 모델을 같은 데이터베이스 위에 두었으므로 connection을 공유하면 편리해서 그렇게 한 것뿐, 해당 knex connection을 무시하고 다른 데이터베이스, 혹은 mongo나 filesystem 등 아예 RDB가 아닌 곳에서 조회를 수행한 후 목록을 반환하더라도 형식만 잘 맞으면 아무런 문제가 없습니다.</p>
</blockquote>
<h2>그 권한을 어떻게 검사하는가?</h2>
<p>다음으로 고민해야 하는 문제는 저 권한들의 검사 방법이었습니다. 제일 간단하게는 그냥 PA들의 리스트를 Koa 라우터에서 조회할 수 있도록 하면 되겠지만 이렇게 하면 권한을 검사하는 똑같은 if문이 매 라우터마다 들어가게 됩니다. 저는 비슷한 코드가 중복되는 것을 극도로 꺼리므로 이는 용납가능한 방법이 아니었습니다.</p>
<p>이때 가장 좋은 방법은 권한 검사를 하는 미들웨어들을 RBAC 모듈 내에서 생성하도록 한 후, 그 미들웨어에서 권한 검사를 수행하는 것이었습니다. 다만 이 아이디어를 떠올리자마자 바로 불가능함을 깨달았습니다. 왜냐하면 유저 정보야 auth 미들웨어를 앞단에 둔다면 ctx 파라매터를 통해 가져올 수 있다 치더라도, object가 관계된 경우 라우터에서 어떤 object에 접근하려는지를 알아야 하는데 이 object는 query로 공급될 수도, parameter로 공급될 수도, post body에 포함될 수도 있으며, 심지어 정확한 오브젝트 기본 키가 쿼리에 포함된 것이 아니라 오브젝트 질의를 위한 조건만 있을 수도 있기 때문입니다. 따라서 api 구현을 모르는 미들웨어 내부에서는 어떤 오브젝트에 접근하는지 알 방법이 없습니다.</p>
<p>이를 고민하다 다음과 같은 아이디어를 떠올렸습니다. 먼저 각 action에 대한 미들웨어를 생성하도록 구현합니다. 유저 정보는 앞서 언급한 것처럼 쉽게 알 수 있습니다. 이때 Object가 없는, action만으로 이루어진 permission module에서는 module, action이 결정되므로 permission이 유일하게 결정되고 권한 검사를 수행할 수 있습니다. 그래서 권한 검사를 미들웨어 내에서 수행한 후 권한이 없는 경우 401 unauthorized를 반환합니다.</p>
<p>그리고 object가 있는 경우에는 ctx에 checkPermssion 함수를 삽입, 라우터 내에서 <code>ctx.checkPermission(object)</code> 와 같은 형식으로 검사를 할 수 있도록 구현했...었습니다.</p>
<h2>그런데 대상이 여러 개면?</h2>
<p>그런데 위 <code>checkPermission</code> 함수를 주입하는 방법에는 치명적인 문제가 있었습니다. 바로 object가 여러 개인 경우였습니다. 예컨대 게시판 리스트를 가져오는 경우 앞서 말한 바와 같이 어떤 게시판은 조회가 가능하고 어떤 게시판은 조회가 안 되어야 하는데, 그러면 게시판 목록을 가져온 후 <code>checkPermission</code> 함수를 매 게시판에 대해 실행하여 권한 검사를 해 주어야 합니다. 이는 매우매우 비효율적인 구현이었습니다.</p>
<p>여기에서도 머리를 한참 싸매다가, 나름 괜찮은 생각을 해 냈습니다. 바로 한 개의 오브젝트를 체크하는 함수를 삽입하는 것이 아니라 그냥 허용되는 오브젝트들을 전부 가져올 수 있는 함수를 삽입하는 것입니다. 그러면 라우터 내에서 허용되는 오브젝트들을 가져온 후 SQL에서 IN 연산을 통하여 쉽게 필터링을 할 수 있습니다.</p>
<blockquote>
<p>위 문단에서 '허용되는 오브젝트들의 리스트' 가 아니라 '허용되는 오브젝트들의 리스트를 가져오는 함수' 를 삽입한 이유는 불필요한 DB 질의를 막기 위해서입니다. 나중에 설명하겠지만 RBAC만으로 권한 컨트롤을 할 수 없는 경우도 있습니다. 그러면 ABAC등 추가적인 권한 시스템을 도입해야 합니다. 이 경우 오브젝트 권한 검사를 하기 전에 이미 접근 불가능함이 결정되는 경우가 있습니다. 그렇다면 굳이 오브젝트에 대한 권한 검사를 할 필요가 없으므로 라우터 내에서 오브젝트 권한 검사를 선택적으로 수행할 수 있도록 구성한 것입니다.</p>
<p>그리고 허용되는 모든 오브젝트를 가져오는 것이 언듯 비효율적인 것처럼 보이지만 오히려 효율적인 이유는 DB 조회 회수가 줄어들기 때문입니다. 이전의 방법에서 DB 조회가 N+1번 일어났다면 현재의 방법에서는 2번만 일어납니다. DB 조회는 레이턴시가 크기 때문에 무조건 조회가 적을수록 좋고, 따라서 현재 방법이 더 효율적입니다.</p>
</blockquote>
<p>아래는 위 내용을 모두 적용한, object가 있는 경우의 라우터입니다.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MenuPermission</span> = <span class="hljs-variable constant_">RBAC</span>.<span class="hljs-title function_">getRBACModule</span>(<span class="hljs-string">&#x27;menu&#x27;</span>, [<span class="hljs-string">&#x27;get&#x27;</span>], <span class="hljs-keyword">async</span> knex =&gt; {
  <span class="hljs-keyword">const</span> menus = <span class="hljs-keyword">await</span> knex.<span class="hljs-title function_">select</span>(<span class="hljs-string">&#x27;menu_pk&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>).<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;menu&#x27;</span>);
  <span class="hljs-keyword">return</span> menus.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> ({ <span class="hljs-attr">id</span>: x.<span class="hljs-property">menu_pk</span>, <span class="hljs-attr">name</span>: x.<span class="hljs-property">name</span> }));
});

router.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-title class_">MenuPermission</span>.<span class="hljs-property">middlewares</span>.<span class="hljs-property">get</span>, <span class="hljs-keyword">async</span> (ctx) =&gt; {
  <span class="hljs-keyword">const</span> allowedObjects = <span class="hljs-keyword">await</span> ctx.<span class="hljs-title function_">getAllowedObjects</span>();
  <span class="hljs-comment">// allowedObjects are actually list of primary keys.</span>
  <span class="hljs-keyword">const</span> query = ctx.<span class="hljs-property">knex</span>.<span class="hljs-title function_">select</span>([
    <span class="hljs-string">&#x27;menu_pk&#x27;</span>,
    <span class="hljs-string">&#x27;parent_pk&#x27;</span>,
    <span class="hljs-string">&#x27;name&#x27;</span>,
    <span class="hljs-string">&#x27;url&#x27;</span>
  ])
    .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;menu&#x27;</span>)
    .<span class="hljs-title function_">whereIn</span>(<span class="hljs-string">&#x27;menu_pk&#x27;</span>, allowedObjects)
    .<span class="hljs-title function_">orderBy</span>(<span class="hljs-string">&#x27;order&#x27;</span>, <span class="hljs-string">&#x27;desc&#x27;</span>);
  <span class="hljs-comment">// 중략</span>
  ctx.<span class="hljs-property">body</span> = result;
});
</code></pre>
<p>아래는 오브젝트가 없는 경우의 라우터입니다.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">SomePermission</span> = <span class="hljs-variable constant_">RBAC</span>.<span class="hljs-title function_">getRBACModule</span>(<span class="hljs-string">&#x27;some&#x27;</span>, [<span class="hljs-string">&#x27;list&#x27;</span>, <span class="hljs-string">&#x27;read&#x27;</span>, <span class="hljs-string">&#x27;delete&#x27;</span>]);

router.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/some/router&#x27;</span>,
  <span class="hljs-title class_">SomePermission</span>.<span class="hljs-property">middlewares</span>.<span class="hljs-property">list</span>,
  <span class="hljs-keyword">async</span> ctx =&gt; {
  	<span class="hljs-keyword">const</span> data = ctx.<span class="hljs-property">knex</span>.<span class="hljs-title function_">select</span>().<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;some_table&#x27;</span>)
    ctx.<span class="hljs-property">body</span> = data;
  });
</code></pre>
<p>위 예시들에서는 Permission.middlewares.get 과 같이 미들웨어 이름이 길어서 가독성이 좋지 않습니다. 이는 예시를 위한 것이고, 새로운 변수에 미들웨어를 할당하여 간단히 짧게 줄일 수 있습니다.</p>
<h2>User Model과 분리는?</h2>
<p>앞의 구현을 보면 미들웨어 내부에서 유저 정보를 이미 알고 있다고 가정했습니다. 그런데 사실은 이렇게 하면 유저 모델에 종속성이 생기게 됩니다. 미들웨어 내부에서 유저 정보가 어떤 변수에 어떤 이름으로 저장되어있을지 결정하는 것은 유저 모델인데, 이것에 따라 권한 시스템의 소스코드가 바뀌어야 하기 때문입니다. 따라서 저는 이런 종속성을 해결하기 위해 RBAC 모듈 자체를 초기화할 때 Koa의 ctx 오브젝트로부터 유저 정보, 즉 RBAC에서 subject에 해당하는 정보를 추출하는 함수를 파라매터로 받도록 하였습니다.</p>
<pre><code class="language-js"><span class="hljs-comment">// ../config/rbacConfig.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RBAC</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;../libs/rbac&quot;</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ENV</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../env.json&#x27;</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getSubject</span>(<span class="hljs-params">ctx</span>) {
  <span class="hljs-keyword">if</span>(!ctx.<span class="hljs-property">session</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>; <span class="hljs-comment">// -1 means users without login.</span>
  <span class="hljs-keyword">if</span>(!ctx.<span class="hljs-property">session</span>.<span class="hljs-property">user</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
  <span class="hljs-keyword">return</span> ctx.<span class="hljs-property">session</span>.<span class="hljs-property">user</span>.<span class="hljs-property">user_pk</span>;
}

<span class="hljs-keyword">const</span> rbac = <span class="hljs-keyword">new</span> <span class="hljs-title function_">RBAC</span>(<span class="hljs-variable constant_">ENV</span>.<span class="hljs-property">db</span>, getSubject);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = rbac;
</code></pre>
<p>실제로 RBAC 모듈을 사용할 때에는 rbac 모듈을 바로 import하는 것이 아니라 이 config파일을 import하여 사용합니다. 이렇게 함으로써 유저 모델과 권한 모델을 완전히 분리할 수 있습니다.</p>
<blockquote>
<p>즉, rbac 모듈(<code>../libs/rbac</code>)에서 export하는 것은 class이고, config 파일에서 export하는 것은 class의 instance입니다.</p>
</blockquote>
<p>즉, 이 권한 모델은 당장 라이브러리화하여 우리 동아리 홈페이지뿐만이 아니라 다른 서비스에 적용하는 것이 가능하다는 의미입니다.</p>
<h2>'소유자' 개념은?</h2>
<p>여태까지는 RBAC를 다루었지만 사실 모든 경우에 RBAC가 사용가능한 것은 아닙니다. 왜냐하면 어떤 게시글을 삭제하는 권한이 있다면 이 권한은 (관리자를 제외하면) 오직 그 게시글을 작성한 사람에게만 허용되어야 할 텐데, 이는 'object와 subject의 관계'에 따라 권한이 달라지기 때문입니다. 그런데 RBAC에서는 오직 object와 role, permission과 role의 N:M 관계만 존재할 뿐 object와 subject의 직접적인 관계는 존재하지 않습니다. 그러므로 이러한 관계에 기반한 권한 부여는 원리적으로 불가능하며, 따라서 이런 권한 체크는 Attribute-Based Access Control (ABAC) 등을 도입하여 해결해야 합니다.</p>
<blockquote>
<p>실제로는 유저 한 명만을 포함하는 role들을 유저 수만큼 생성하면 되기는 합니다. 그런데 그럴 경우 앞서 언급한 '이상적인 권한 시스템'과 같은 이유로 권한 개수가 폭증, 관리가 불가능하게 됩니다.</p>
</blockquote>
<p>그래서 이 문제를 오랫동안 고민했습니다. 그렇지만 사실상 위와 같은 삭제 API 몇 개를 제외하면 ABAC가 필요한 부분은 크게 많지 않다고 판단, 별도의 권한 시스템의 도입 없이 게시판 시스템 소스코드 단계에서 구현하기로 결정했습니다. 만약 이런 구현이 더 많이 필요해지게 된다면 물론 그때는 별도의 ABAC시스템을 구현할 것입니다.</p>
<h1>결론</h1>
<p>RBAC 정책 모델을 Koa 기반으로 구현해보았습니다. 위 구현은 모듈화가 잘 되어 있기는 하지만 사실 Koa 라이브러리에 아주 약간의 종속성이 있습니다. 그러나 Express 등을 지원하도록 확장하는 것이 매우 간단하고, 심지어 (DB를 분리하고 API형태로 사용할 수 있도록) 하나의 독립된 서비스로 만드는 것까지  가능하다는 것 등을 고려하면 실질적인 종속성은 없다고 보아도 무방하다고 생각합니다.</p>
<blockquote>
<p>Knex는 내부적으로만 사용하므로 종속성이 아닙니다. 위에서 언급한 종속성이란 '제가 디자인한 이 권한 라이브러리를 쓰기 위해 라이브러리를 사용하는 쪽에서 제약되는 것'을 말합니다.</p>
</blockquote>
</main></div></main><footer class="footer_footer__E_Uzl">© 2020 Copyright : Unknownpgr</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"RBAC 구현","category":"development","date":"Thu, 02 Dec 2021 17:45:23 GMT","html":"\u003cblockquote\u003e\n\u003cp\u003e이 글은 \u003ca href=\"https://csrc.nist.gov/CSRC/media/Projects/Role-Based-Access-Control/documents/ferraiolo-kuhn-92.pdf\"\u003eRole-Based Access Control\u003c/a\u003e (1992)를 참고하여 작성하였습니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e저는 지금 제가 속한 동아리의 홈페이지 개선 작업을 하고 있습니다. 기존의 홈페이지는 PHP 언어로 작성된 XE기반이었습니다. XE는 버전 1이 1999년에 발표되었고 2009년에 유지보수가 중단되었습니다. 즉, 엄청 오래된 시스템입니다.\u003c/p\u003e\n\u003cp\u003e저는 관리자 페이지에 들어가면 warning이 백만 개가 뜨는 이 상황을 참지 못하고 (거의 20년만에) 홈페이지를 Node.js 기반의 시스템으로 이전하기로 결심했습니다. 그러다 권한 시스템을 구현해야 하는 문제에 부딛혔습니다. 동아리 홈페이지가 단순한 게시판이라면 그렇게 크게 고민하지 않았겠지만, 동아리 홈페이지에는 대회 신청 기능을 포함하여 수많은 기능들이 들어 있습니다. 저는 이 기능들을 모두 깔끔하게 제어할 수 있는, 그러면서도 모듈로 따로 분리되어 유저 시스템이나 게시판 시스템을 비롯한 다른 시스템들에 대한 종속성이 없는 권한 시스템을 개발하고 싶었습니다.\u003c/p\u003e\n\u003cp\u003e그런데 저는 평소에 AWS나 쿠버네티스를 다루면서 이러한 시스템들이 RBAC를 사용한다는 것을 알고 있었으며, 따라서 RBAC가 AWS와 같이 복잡한 시스템에 적용하기 적합함을 알고 있었습니다. 그래서 이를 공부하여 동아리 홈페이지에 적용하기로 결정했습니다. 그리고 실제로 구현을 해 보니 RBAC를 구현하는 것이 생각보다 재미있는 과정이어서, 제가 공부한 내용과 그 구현 과정을 정리해두고자 합니다.\u003c/p\u003e\n\u003ch1\u003eRole-Based Access Control (RBAC)이란?\u003c/h1\u003e\n\u003cp\u003eRBAC란 1992년 David F. Ferraiolo and D. Richard Kuhn 이 \u003ca href=\"https://csrc.nist.gov/CSRC/media/Projects/Role-Based-Access-Control/documents/ferraiolo-kuhn-92.pdf\"\u003eRole-Based Access Control\u003c/a\u003e 논문에서 제시한, 접근 제어(Access Control) 방법의 하나입니다. 그 이전에는 Mandatory Access Control(MAC), Discretionary Access Controls (DAC)가 일반적으로 군사, 혹은 정부에서 쓰기 적합한 접근 제어 체계로 여겨졌습니다. 그러나 위 논문에서는 DAC를 위한 이론적 기반이 명확하지 않으며 상업적, 혹은 정부를 위한 조직에서 사용하기에 부적합하다고 주장하며 새로운 방식의 비임의적(non-discretionary) 접근방식인 Role-Based Access Control (RBAC)를 제안했습니다.\u003c/p\u003e\n\u003cp\u003e따라서 RBAC를 이해하기 위해서는 기존의 DAC가 어떤 문제점을 가지고 있는지 알아볼 필요가 있습니다. DAC는 Unix filesystem과 비슷하게 모든 대상에 소유자 (Owner)를 부여한 후 이 소유자가 해당 오브젝트를 마음대로 조작할 수 있는 방식입니다. DAC는 일반적으로 임의 접근 제어라 번역되지만, 이런 맥락에서 저는 이를 재량 기반 접근 제어라 번역하고 싶습니다. 왜냐하면 오브젝트에 대한 \u003cstrong\u003e모든\u003c/strong\u003e 권한을 소유자의 재량에 맡기기 때문입니다. 예컨대 어떤 소유자가 다른 소유자에게 소유를 이전할 수 있으며 소유한 오브젝트의 접근 권한도 마음대로 변경할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e그런데 많은 조직에서는 실제 유저가 '접근 권한에 대한 정보'를 '소유'하지 않습니다. 즉 오브젝트에 접근하는 것이 가능할지라도 그 오브젝트에 대한 접근 권한 자체를 남에게 넘기는 것은 불가능합니다. 실제로 '접근 권한'을 관리하는 것은 시스템, 혹은 허가받은 관리자입니다.\u003c/p\u003e\n\u003cp\u003e이때 일반적으로 접근 제한은 (유저의 오브젝트의 소유 여부와 다르게) 유저가 조직 내에서 속한 역할에 의해 결정됩니다. 예를 들어 병원의 경우 의사, 간호사, 치료사, 약사 등의 역할이 있을 것이고, 은행의 경우 출납원, 대출 담당자, 회계사 등의 역할이 있을 것입니다. 이러한 역할은 군사 체계에도 적용될 수 있습니다. 예를 들어 표적 분석가, 상황 분석가, 교통 분속가 등이 전술 시스템에서 일반적인 역할입니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e...이까지는 거의 논문을 번역한 것이었고, 이 이후부터 본격적인 설명이 나옵니다만 그대로 옮기면 이해하기 어려운 글이 될 것 같아 제 마음대로 쓰겠습니다.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e위 문단에서 저자가 하고 싶었던 말은 이것입니다. 기존 DAC에서는 '소유자 기반' 의 접근 제어가 이루어졌고, 소유권을 타인에게 이전하는 것 등이 가능하므로 권한 제어가 너무 허술하다는 문제가 있습니다. 예를 들어 어떤 중요한 직책을 가진 사람이 잘못하여 기밀 파일의 소유권을 다른 사람에게 넘긴다면 큰 문제가 발생할 것입니다. 그러나 이러한 접근 방법과 다르게 조직 내의 역할을 고려하여 일반적으로 같은 역할을 가진 사용자들은 같은 권한을 가지고 있다는 것에 착안,\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e역할을 정의하고 (e.g. 관리자, 일반 사용자, 동아리 정회원 등)\u003c/li\u003e\n\u003cli\u003e권한을 정의한 후 (e.g. 관리자 페이지 접근, 정회원 게시판 읽기, 자유게시판 읽기 등)\u003c/li\u003e\n\u003cli\u003e각 역할에 권한을 할당하고\u003c/li\u003e\n\u003cli\u003e각 역할에 유저를 할당하면\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e이러한 문제가 깔끔하게 해결됩니다. 이와 같이 유저와 권한을 연결하는 것을 역할 관계로 해석한 것이 역할 기반 접근 제어입니다.\u003c/p\u003e\n\u003ch2\u003eRBAC에 대한 개인적 해석\u003c/h2\u003e\n\u003cp\u003e위 논문에서는 DAC의 문제점을 해결하는 하나의 다른 방식으로써 RBAC를 제안했습니다. 그러나 저는 RBAC를 이상적인 권한 시스템에 대한 대안으로 해석했습니다.\u003c/p\u003e\n\u003cp\u003e이상적인 권한 시스템은 모든 유저에 대한 모든 권한을 설정할 수 있는 시스템입니다. 그러므로 권한이 N개 있고 유저가 M명이 있을 경우 최대 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"7.153ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 3161.4 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D441\" d=\"M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1110.2,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2110.4,0)\"\u003e\u003cpath data-c=\"1D440\" d=\"M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e개의 릴레이션이 필요합니다.\u003c/p\u003e\n\u003cp\u003e그런데 이것을 관리자가 모두 관리하는 것은 거의 불가능합니다. 왜냐하면 관리해야 할 권한 정보가 너무나 많기 때문입니다. 예를 들어 유저가 1000명이고 관리해야 할 권한이 20개인 경우만 생각하더라도 설정해야 할 권한은 2만 개나 됩니다. 물론 그런 현실적인 문제 말고 공간복잡도만 보더라도 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"7.873ex\" height=\"2.262ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -750 3480 1000\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D442\" d=\"M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(763,0)\"\u003e\u003cpath data-c=\"28\" d=\"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(1152,0)\"\u003e\u003cpath data-c=\"1D441\" d=\"M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2040,0)\"\u003e\u003cpath data-c=\"1D440\" d=\"M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(3091,0)\"\u003e\u003cpath data-c=\"29\" d=\"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmi\u003eM\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e 에 해당하므로 너무 큽니다.\u003c/p\u003e\n\u003cp\u003e이때 일반적인 시스템이라면 모든 유저가 서로 다른 권한을 가지지는 않을 것입니다. 그러므로 같은 권한을 가진 유저들을 그룹으로 묶어 관리하면 필요한 릴레이션을 줄일 수 있습니다. 예컨대 같은 권한을 가지는 유저들을 묶어 보았더니 K개의 그룹이 나왔다고 가정해봅시다. 그러면\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e각 유저가 속한 그룹이 무엇인지, 즉 유저-그룹의 관계와\u003c/li\u003e\n\u003cli\u003e각 그룹이 어떤 권한을 가지는지,즉 그룹-권한의 관계만\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e저장하면 됩니다. 그러므로 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"33.414ex\" height=\"2.262ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -750 14768.8 1000\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D441\" d=\"M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1110.2,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2110.4,0)\"\u003e\u003cpath data-c=\"1D43E\" d=\"M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(3221.7,0)\"\u003e\u003cpath data-c=\"2B\" d=\"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(4221.9,0)\"\u003e\u003cpath data-c=\"1D43E\" d=\"M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(5333.1,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(6333.3,0)\"\u003e\u003cpath data-c=\"1D440\" d=\"M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(7662.1,0)\"\u003e\u003cpath data-c=\"3D\" d=\"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(8717.9,0)\"\u003e\u003cpath data-c=\"28\" d=\"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(9106.9,0)\"\u003e\u003cpath data-c=\"1D441\" d=\"M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(10217.1,0)\"\u003e\u003cpath data-c=\"2B\" d=\"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(11217.3,0)\"\u003e\u003cpath data-c=\"1D440\" d=\"M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(12268.3,0)\"\u003e\u003cpath data-c=\"29\" d=\"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(12879.6,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(13879.8,0)\"\u003e\u003cpath data-c=\"1D43E\" d=\"M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eK\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmi\u003eK\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e개의 릴레이션만이 필요합니다. 아까의 예시에서 그룹이 4개정도 나왔다고 가정해보면 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"22.752ex\" height=\"2.262ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -750 10056.4 1000\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mo\"\u003e\u003cpath data-c=\"28\" d=\"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mn\" transform=\"translate(389,0)\"\u003e\u003cpath data-c=\"32\" d=\"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003cpath data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(500,0)\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1611.2,0)\"\u003e\u003cpath data-c=\"2B\" d=\"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mn\" transform=\"translate(2611.4,0)\"\u003e\u003cpath data-c=\"31\" d=\"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003cpath data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(500,0)\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003cpath data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(1000,0)\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003cpath data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(1500,0)\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(4611.4,0)\"\u003e\u003cpath data-c=\"29\" d=\"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(5222.7,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mn\" transform=\"translate(6222.9,0)\"\u003e\u003cpath data-c=\"34\" d=\"M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(7000.7,0)\"\u003e\u003cpath data-c=\"3D\" d=\"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mn\" transform=\"translate(8056.4,0)\"\u003e\u003cpath data-c=\"34\" d=\"M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003cpath data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(500,0)\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003cpath data-c=\"38\" d=\"M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z\" transform=\"translate(1000,0)\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003cpath data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(1500,0)\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmn\u003e20\u003c/mn\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1000\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmn\u003e4\u003c/mn\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e4080\u003c/mn\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e개의 릴레이션만이 필요함 알 수 있습니다. 아까의 2만 개에 비하면 개수가 훨씬 줄었습니다. 심지어 이는 유저가 한 번에 여러 개의 그룹에 속할 수도 있다고 가정한 것입니다. 만약 유저가 속할 수 있는 그룹을 하나로 제한하면 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.186ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"11.93ex\" height=\"1.731ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 5272.9 765\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D441\" d=\"M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1110.2,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2110.4,0)\"\u003e\u003cpath data-c=\"1D43E\" d=\"M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(3221.7,0)\"\u003e\u003cpath data-c=\"2B\" d=\"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(4221.9,0)\"\u003e\u003cpath data-c=\"1D440\" d=\"M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eK\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e개의 릴레이션만이 필요하며, 이전의 예시로 계산해보면 1080개의 릴레이션이면 충분합니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e물론 DAC도 이상적인 권한 시스템에 대한 대안으로 해석할 수 있습니다. 이 경우 권한을 유저(\u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"2.009ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 888 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D441\" d=\"M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e)의 리소스(\u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"2.378ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 1051 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D440\" d=\"M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e)에 대한 행동(\u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"2.011ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 889 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D43E\" d=\"M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e)로 해석한 것으로, \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"11.93ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 5272.9 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D441\" d=\"M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1110.2,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2110.4,0)\"\u003e\u003cpath data-c=\"1D440\" d=\"M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(3383.7,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(4383.9,0)\"\u003e\u003cpath data-c=\"1D43E\" d=\"M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e개의 릴레이션을 모두 관리할 수가 없으니 모든 리소스에 소유자를 할당한 후, 해당 소유자가 해당 리소스에 대한 모든 행위를 수행할 수 있는 것으로 해석하는 것입니다. 그러면 소유자-리소스 관계 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"2.378ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 1051 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D440\" d=\"M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e개만 저장하면 됩니다. 그러나 이 경우 어떤 리소스의 소유자에 대해 특정 행위만을 골라 제한하는 것이 불가능하다는 단점이 있습니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003eRBAC 모델의 구성 및 수학적 표현\u003c/h2\u003e\n\u003cp\u003eRBAC 모델에서는 아래와 같은 5개의 주요한 구성 요소가 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e어떤 행위(function)이 가능한지에 대한 여부를 '권한 (\u003cstrong\u003eP\u003c/strong\u003eermission)'\u003c/li\u003e\n\u003cli\u003e어떤 권한을 행위를 행사할 수 있는 주체를 '주체 (\u003cstrong\u003eS\u003c/strong\u003eubject)'\u003c/li\u003e\n\u003cli\u003e특정한 권한들을 가진 대상의의 그룹을 '역할 (\u003cstrong\u003eR\u003c/strong\u003eole)'\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이라고 부르며, 보통 약어로 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.699ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 751 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e, \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.459ex\" height=\"1.645ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -705 645 727\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eS\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e, \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.048ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.717ex\" height=\"1.593ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 759 704\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D445\" d=\"M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e이라 씁니다.\u003c/p\u003e\n\u003cp\u003e그리고\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e어떤 Permission이 어떤 Role에 할당되었는지, 즉 권한-역할 관계를 \u003cstrong\u003eP\u003c/strong\u003eermission \u003cstrong\u003eA\u003c/strong\u003essignment\u003c/li\u003e\n\u003cli\u003e어떤 Subject가 어떤 Role에 할당되었는지, 즉 주체-역할 관계를 \u003cstrong\u003eS\u003c/strong\u003eubject \u003cstrong\u003eA\u003c/strong\u003essignment\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이라고 부르며 보통 약어로 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"3.396ex\" height=\"1.62ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -716 1501 716\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(751,0)\"\u003e\u003cpath data-c=\"1D434\" d=\"M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e, \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"3.156ex\" height=\"1.67ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -716 1395 738\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(645,0)\"\u003e\u003cpath data-c=\"1D434\" d=\"M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e라 씁니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e그리고 \u003cstrong\u003eT\u003c/strong\u003eransaction (T), \u003cstrong\u003eR\u003c/strong\u003eole \u003cstrong\u003eH\u003c/strong\u003eierarchy (RH) 등이 있지만 이는 지금은 다루지 않겠습니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e그리고 이들은 모두 집합으로 표현할 수 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.699ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 751 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e, \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.459ex\" height=\"1.645ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -705 645 727\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eS\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e, \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.048ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.717ex\" height=\"1.593ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 759 704\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D445\" d=\"M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e은 모두 단순한 집합으로 생각할 수 있으며\u003c/li\u003e\n\u003cli\u003e\u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.09ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"12.595ex\" height=\"1.71ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -716 5567 756\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(751,0)\"\u003e\u003cpath data-c=\"1D434\" d=\"M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1778.8,0)\"\u003e\u003cpath data-c=\"2282\" d=\"M84 250Q84 372 166 450T360 539Q361 539 370 539T395 539T430 540T475 540T524 540H679Q694 532 694 520Q694 511 681 501L522 500H470H441Q366 500 338 496T266 472Q244 461 224 446T179 404T139 337T124 250V245Q124 157 185 89Q244 25 328 7Q348 2 366 2T522 0H681Q694 -10 694 -20Q694 -32 679 -40H526Q510 -40 480 -40T434 -41Q350 -41 289 -25T172 45Q84 127 84 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2834.6,0)\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(3807.8,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(4808,0)\"\u003e\u003cpath data-c=\"1D445\" d=\"M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e⊂\u003c/mo\u003e\u003cmi\u003eP\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e이고\u003c/li\u003e\n\u003cli\u003e\u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.09ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"12.115ex\" height=\"1.71ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -716 5355 756\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(645,0)\"\u003e\u003cpath data-c=\"1D434\" d=\"M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1672.8,0)\"\u003e\u003cpath data-c=\"2282\" d=\"M84 250Q84 372 166 450T360 539Q361 539 370 539T395 539T430 540T475 540T524 540H679Q694 532 694 520Q694 511 681 501L522 500H470H441Q366 500 338 496T266 472Q244 461 224 446T179 404T139 337T124 250V245Q124 157 185 89Q244 25 328 7Q348 2 366 2T522 0H681Q694 -10 694 -20Q694 -32 679 -40H526Q510 -40 480 -40T434 -41Q350 -41 289 -25T172 45Q84 127 84 250Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2728.6,0)\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(3595.8,0)\"\u003e\u003cpath data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(4596,0)\"\u003e\u003cpath data-c=\"1D445\" d=\"M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e⊂\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e구현\u003c/h1\u003e\n\u003cp\u003e위 시스템은 보는 바와 같이 굉장히 간단합니다. 그러나 개념적인 구조와 실제 구현은 거리가 좀 멀었습니다.\u003c/p\u003e\n\u003cp\u003e먼저 시스템 구현에 앞서 저는 아래와 같은 목표를 설정했습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRBAC 시스템을 고안한다.\u003c/li\u003e\n\u003cli\u003e이 시스템은 독립된 모듈로 존재하며, 유저 모델이나 게시판, 대회 신청 등 다른 시스템에 종속성을 가지지 않는다.\u003c/li\u003e\n\u003cli\u003e모듈을 사용하는 것은 최대한 간단하게 한다. 즉, 모듈을 사용하기 위해서 추가해야 하는 코드를 최소한으로 한다.\u003c/li\u003e\n\u003cli\u003e시스템은 관계형 데이터베이스를 사용한다.\u003c/li\u003e\n\u003cli\u003eDB나 소스코드를 전혀 건드리지 않고도 (CLI 툴이나 웹 대시보드 형태로) 권한 설정이 가능해야만 한다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이는 제가 관리하는 서비스가 동아리 홈페이지 서비스였기 때문입니다. 동아리 홈페이지 서비스는 저 혼자 관리하는 것이 아니라 미래에 다른 후배들이 관리하게 될 것이고, 그 중에서는 컴퓨터 전공이 아닌 학생도 많이 있을 것입니다. 그런데 동접자가 100명도 나오지 않는 서비스임에도 Redis같은 기술을 도입하면 관리 포인트가 늘어날 것이고, 백업도 힘들 것입니다. (DB 전체를 백업하는 스크립트는 이미 있어 간단히 백업이 가능한 상황입니다.) 또한 권한 설정 등을 위해 소스코드를 수정하는 것은 그 자체로 좋지 못한 구현임이 분명합니다. 종속성 제거나 모듈화 등도 같은 맥락입니다.\u003c/p\u003e\n\u003cp\u003e그런데 이러한 조건들을 설정한 후에 구현을 하려고 하니 다음과 같은 여러 문제가 발생했습니다.\u003c/p\u003e\n\u003ch2\u003e권한들의 목록을 어떻게 가져오는가?\u003c/h2\u003e\n\u003cp\u003e위 시스템에서는 어쨌든 다섯 개의 집합이 필요합니다. \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.439ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"15.452ex\" height=\"2.059ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -716 6829.7 910\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(751,0)\"\u003e\u003cpath data-c=\"2C\" d=\"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(1195.7,0)\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1840.7,0)\"\u003e\u003cpath data-c=\"2C\" d=\"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2285.3,0)\"\u003e\u003cpath data-c=\"1D445\" d=\"M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(3044.3,0)\"\u003e\u003cpath data-c=\"2C\" d=\"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(3489,0)\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(4240,0)\"\u003e\u003cpath data-c=\"1D434\" d=\"M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(4990,0)\"\u003e\u003cpath data-c=\"2C\" d=\"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(5434.7,0)\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(6079.7,0)\"\u003e\u003cpath data-c=\"1D434\" d=\"M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003cmo\u003e,\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo\u003e,\u003c/mo\u003e\u003cmi\u003eR\u003c/mi\u003e\u003cmo\u003e,\u003c/mo\u003e\u003cmi\u003eP\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e,\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e 입니다. 그런데 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.459ex\" height=\"1.645ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -705 645 727\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eS\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e는 그냥 기존의 유저 모델을 그대로 가져온다고 치고, \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.048ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.717ex\" height=\"1.593ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 759 704\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D445\" d=\"M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e은 그냥 컬럼 하나짜리 (Role에 대한 설명을 추가한다면 두 개짜리) 테이블입니다. \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"3.396ex\" height=\"1.62ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -716 1501 716\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(751,0)\"\u003e\u003cpath data-c=\"1D434\" d=\"M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e나 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.05ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"3.156ex\" height=\"1.67ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -716 1395 738\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(645,0)\"\u003e\u003cpath data-c=\"1D434\" d=\"M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e는 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.439ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"6.888ex\" height=\"2.034ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -705 3044.3 899\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(751,0)\"\u003e\u003cpath data-c=\"2C\" d=\"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(1195.7,0)\"\u003e\u003cpath data-c=\"1D445\" d=\"M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mo\" transform=\"translate(1954.7,0)\"\u003e\u003cpath data-c=\"2C\" d=\"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003cg data-mml-node=\"mi\" transform=\"translate(2399.3,0)\"\u003e\u003cpath data-c=\"1D446\" d=\"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003cmo\u003e,\u003c/mo\u003e\u003cmi\u003eR\u003c/mi\u003e\u003cmo\u003e,\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e가 있으면 간단하게 컬럼 두 개짜리 테이블 두 개로 표현할 수 있습니다. 그런데 결정적인 문제는 집합 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.699ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 751 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e를 어떻게 가져오냐는 것이었습니다.\u003c/p\u003e\n\u003cp\u003e먼저 집합 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.699ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 751 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e가 다른 집합과 다르게 데이터베이스에 저장될 수 없음을 금방 깨달았습니다. 왜냐하면 만약 그렇게 된다면 소스코드를 수정하여 새로운 API를 추가하거나 삭제할 때마다 데이터베이스를 직접 건드려서 권한을 조정해줘야 하기 때문입니다. 이는 정말로 비효율적이고 오류가 발생하기 쉬운 구조입니다. 그래서 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.699ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 751 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e는 서버가 실행된 이후 런타임에 동적으로 조회 시마다 생성하는 방식을 택하기로 했습니다.\u003c/p\u003e\n\u003cp\u003e그리고 나서 처음 생각한 것은 API와 권한을 1:1 대응시키는 것이었습니다. 그러면 API들의 리스트를 가져오면 곧 이것이 권한의 리스트가 되고, 이것은 Koa의 route를 가져오는 기능을 사용하면 쉽게 해결할 수 있습니다. 즉, 서버가 시작될 때 자기 자신의 API의 리스트를 가져온 후 이것을 \u003cmjx-container class=\"MathJax\" jax=\"SVG\" style=\"direction: ltr; position: relative;\"\u003e\u003csvg style=\"overflow: visible; min-height: 1px; min-width: 1px; vertical-align: 0;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.699ex\" height=\"1.545ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -683 751 683\" aria-hidden=\"true\"\u003e\u003cg stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"\u003e\u003cg data-mml-node=\"math\"\u003e\u003cg data-mml-node=\"mi\"\u003e\u003cpath data-c=\"1D443\" d=\"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z\" style=\"stroke-width: 3;\"\u003e\u003c/path\u003e\u003c/g\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e\u003cmjx-assistive-mml unselectable=\"on\" display=\"inline\" style=\"top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003cmi\u003eP\u003c/mi\u003e\u003c/math\u003e\u003c/mjx-assistive-mml\u003e\u003c/mjx-container\u003e라고 두는 것입니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e그런데\u003c/strong\u003e 동아리 홈페이지를 보면 어떤 게시판에는 모든 유저가 접근 가능하고 어떤 게시판에는 정회원만 접근할 수 있습니다. 즉, 같은 게시판 API를 호출하더라도 권한이 서로 다를 수 있습니다. 그러므로 이 방법은 사용할 수 없습니다. 이는 정말로 해결하기 어려운 문제였습니다. 그래서 다른 권한 구현 라이브러리들을 참고하였고, \u003ca href=\"https://casbin.org/\"\u003eCasbin\u003c/a\u003e 라이브러리를 참고하여 도움을 얻을 수 있었습니다. 바로 권한을 '행위 (Actions)'와 '대상 (Objects)'으로 나눈 후 이것의 곱집합을 권한으로 사용한다는 아이디어였습니다. 예컨대 게시판의 권한을 예로 들자면 아래와 같습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e- 행위 = ['글 목록 읽기', '글 읽기', '글 쓰기']\n- 대상 = ['정회원 게시판', '자유게시판']\n- 권한 = 대상 × 행위 = [\n  ('정회원 게시판', '글 목록 읽기'), ('정회원 게시판', '글 읽기'), ('정회원 게시판', '글 쓰기'),\n  ('자유게시판', '글 목록 읽기'), ('자유게시판', '글 읽기'), ('자유게시판', '글 쓰기')\n  ]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCasbin 라이브러리에서는 이를 특수한 형식의 파일로 구현했지만, 저는 이 방법이 마음에 들지 않았습니다. 왜냐하면 관리자가 카테고리를 추가하거나 삭제할 경우 해당 파일도 마찬가지로 수정해주어야 하는데 이는 매우 비효율적이기 때문입니다. 그래서 저는 RBAC 시스템이 '행위'의 목록과 '대상'의 목록을 받아 이들의 곱집합을 자동으로 생성하도록 구성했습니다.\u003c/p\u003e\n\u003cp\u003e물론 경우에 따라 '대상'이 필요 없는 경우도 있습니다. 예를 들어 (관리자 역할이 사용할 수 있는) '유저 삭제 가능' 기능은 그냥 유저 삭제가 가능하거나 불가능한거나 둘 중 하나일 뿐, 특정 유저만을 삭제할 수 있도록 상세한 권한을 줄 필요는 없습니다. 이런 경우는 '대상' 목록을 \u003ccode\u003enull\u003c/code\u003e로 주면 그냥 '행위'의 목록을 그대로 권한으로 사용하도록 구현했습니다.\u003c/p\u003e\n\u003cp\u003e그런데 시스템을 이렇게 구성할 경우 사소한 문제점이 발생합니다. 바로 의미 없는 권한이 생길 수 있다는 점입니다. 예를 들어서 쪽지 보내기 권한과 게시판 권한을 아래와 같이 한 번에 표현한다고 가정해봅시다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e- 행위 = ['쪽지 보내기', '글 읽기', '글 쓰기']\n- 대상 = ['자유게시판', '정회원 게시판']\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그러면 실제로는 아무 의미가 없는 \u003ccode\u003e자유 게시판 쪽지 보내기(?)\u003c/code\u003e 등의 권한이 만들어지게 됩니다. 그러므로 모든 행위와 모든 대상의 곱집합을 구하는 것이 아니라 특정 행위들과 특정 대상들의 곱집합들만이 가능하게 제한할 수 있도록 permission들을 모듈로 다시 분리했습니다. 즉, 권한은 \u003ccode\u003e(Module, Action, Object)\u003c/code\u003e 의 튜플입니다.\u003c/p\u003e\n\u003cp\u003e어떤 사람들은 모든 연산을 'CRUD' 로 통일하여 RESTful하게 만들면 되지 않겠느냐고 생각할 수도 있습니다. 그런데 실제로 해 보면 상당히 이상한 문제가 많이 발생합니다. 예를 들어 '게시판의 존재를 알 수 있는 권한', 즉 홈페이지에 접속했을 경우 해당 게시판을 게시판 리스트에서 볼 수 있는 권한이 있습니다. 이 권한은 물론 'Read'에 속할 것입니다. 그런데 '게시판에 속한 글들을 읽을 수 있는 권한'은 또 다른 권한인데, 이 또한 CRUD로 표현하자니 Read에 해당합니다. 또는 관리자가 게시판을 추가할 수 있는 권한이 있을 텐데, 이는 CRUD에서 Create에 해당합니다. 그런데 일반 유저가 게시판 내부에 글을 작성할 수 있는 권한 역시 Create에 해당합니다. 즉, CRUD로 표현하게 되면 여러 권한들이 겹쳐서 유일하게 구분되지 않는 경우가 발생할 수도 있습니다. 그 외에도 모든 리소스가 CRUD 4가지를 모두 사용하는 것은 아님을 비롯하여 다양한 문제가 있습니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e물론 API 구조를 매우 RESTful하게 짜면 이를 해결할 수도 있을 것입니다. 그러나 REST에 너무 집착하게 되면 일반성을 상당히 잃게 됩니다. 예컨대 로그인 / 로그아웃을 \u003ccode\u003ePOST /session\u003c/code\u003e 과 \u003ccode\u003eDELETE /session\u003c/code\u003e 과 같이 표현할 수 있지만, 차라리 RESTful하지 않게 \u003ccode\u003ePOST /login\u003c/code\u003e , \u003ccode\u003eDELETE(or POST or GET) /logout\u003c/code\u003e 으로 사용하는 것과 마찬가지입니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e그래서 저는 아래와 같이 권한 모듈을 구현했습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePostPermission\u003c/span\u003e = \u003cspan class=\"hljs-variable constant_\"\u003eRBAC\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRBACModule\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;post\u0026#x27;\u003c/span\u003e, [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;read\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;delete\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;update\u0026#x27;\u003c/span\u003e]);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMenuPermission\u003c/span\u003e = \u003cspan class=\"hljs-variable constant_\"\u003eRBAC\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRBACModule\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu\u0026#x27;\u003c/span\u003e,\n                                          [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;list\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;write\u0026#x27;\u003c/span\u003e], \u003cspan class=\"hljs-comment\"\u003e// Actions\u003c/span\u003e\n                                          [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;free-board\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;member-board\u0026#x27;\u003c/span\u003e] \u003cspan class=\"hljs-comment\"\u003e// Objects\u003c/span\u003e\n                                         );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이때 위 예시의 \u003ccode\u003eCategoryPermission\u003c/code\u003e처럼 카테고리들을 리스트로 관리한다면 파일로 관리하는 것과 아무 차이가 없습니다. 즉 관리자가 카테고리를 추가할 때마다 저 리스트에 카테고리를 추가해야 합니다. 그러므로 아래와 같이 카테고리 목록을 데이터베이스에서 가져오도록 구현했습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMenuPermission\u003c/span\u003e = \u003cspan class=\"hljs-variable constant_\"\u003eRBAC\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRBACModule\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu\u0026#x27;\u003c/span\u003e, [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;list\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;write\u0026#x27;\u003c/span\u003e], \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e knex =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e menus = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e knex.\u003cspan class=\"hljs-title function_\"\u003eselect\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu_pk\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003efrom\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e menus.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({ \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: x.\u003cspan class=\"hljs-property\"\u003emenu_pk\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: x.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e }));\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e또한 여기서 object는 실제 object 전체가 아니라 데이터베이스에서 기본 키를 의미합니다. 그런데 object의 기본 키만을 보여준다면 관리자가 권한을 설정하기 어려울 것입니다. 그래서 위와 같이 문자열의 리스트 대신 \u003ccode\u003e{id, description}\u003c/code\u003e 의 리스트를 공급하도록 하여 관리자가 볼 때에는 id와 description이 함께 보이도록 구현했습니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e별로 중요한 것은 아니지만, 실제로는 objects로 \u003ccode\u003eObject[]\u003c/code\u003e, \u003ccode\u003ePromise\u0026lt;Object[]\u0026gt;\u003c/code\u003e, \u003ccode\u003efunction =\u0026gt; Promise\u0026lt;Object[]\u0026gt;\u003c/code\u003e 를 입력받을 수 있도록 구현했습니다.\u003c/p\u003e\n\u003cp\u003e그리고 위 구현에서 관리자가 서버 실행 중에 카테고리를 변경하는 것을 반영하기 위해 해당 쿼리가 매 메뉴 조회마다 발생한다고 생각할 수도 있습니다. 그러나 실제로 권한 검사 때 조회되는 것은 PA이지 P가 아닙니다. 그러므로 위 메뉴 리스트 조회는 관리자 페이지에서 관리자가 권한을 설정하기 위해 권한 목록을 불러오는 경우에만 조회됩니다.\u003c/p\u003e\n\u003cp\u003e그리고 위 예시에서는 object 목록을 공급할 때 권한 모듈 내부에서 공급된 knex connection을 사용합니다. 그러나 이는 제가 권한 모델과 유저 모델을 같은 데이터베이스 위에 두었으므로 connection을 공유하면 편리해서 그렇게 한 것뿐, 해당 knex connection을 무시하고 다른 데이터베이스, 혹은 mongo나 filesystem 등 아예 RDB가 아닌 곳에서 조회를 수행한 후 목록을 반환하더라도 형식만 잘 맞으면 아무런 문제가 없습니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e그 권한을 어떻게 검사하는가?\u003c/h2\u003e\n\u003cp\u003e다음으로 고민해야 하는 문제는 저 권한들의 검사 방법이었습니다. 제일 간단하게는 그냥 PA들의 리스트를 Koa 라우터에서 조회할 수 있도록 하면 되겠지만 이렇게 하면 권한을 검사하는 똑같은 if문이 매 라우터마다 들어가게 됩니다. 저는 비슷한 코드가 중복되는 것을 극도로 꺼리므로 이는 용납가능한 방법이 아니었습니다.\u003c/p\u003e\n\u003cp\u003e이때 가장 좋은 방법은 권한 검사를 하는 미들웨어들을 RBAC 모듈 내에서 생성하도록 한 후, 그 미들웨어에서 권한 검사를 수행하는 것이었습니다. 다만 이 아이디어를 떠올리자마자 바로 불가능함을 깨달았습니다. 왜냐하면 유저 정보야 auth 미들웨어를 앞단에 둔다면 ctx 파라매터를 통해 가져올 수 있다 치더라도, object가 관계된 경우 라우터에서 어떤 object에 접근하려는지를 알아야 하는데 이 object는 query로 공급될 수도, parameter로 공급될 수도, post body에 포함될 수도 있으며, 심지어 정확한 오브젝트 기본 키가 쿼리에 포함된 것이 아니라 오브젝트 질의를 위한 조건만 있을 수도 있기 때문입니다. 따라서 api 구현을 모르는 미들웨어 내부에서는 어떤 오브젝트에 접근하는지 알 방법이 없습니다.\u003c/p\u003e\n\u003cp\u003e이를 고민하다 다음과 같은 아이디어를 떠올렸습니다. 먼저 각 action에 대한 미들웨어를 생성하도록 구현합니다. 유저 정보는 앞서 언급한 것처럼 쉽게 알 수 있습니다. 이때 Object가 없는, action만으로 이루어진 permission module에서는 module, action이 결정되므로 permission이 유일하게 결정되고 권한 검사를 수행할 수 있습니다. 그래서 권한 검사를 미들웨어 내에서 수행한 후 권한이 없는 경우 401 unauthorized를 반환합니다.\u003c/p\u003e\n\u003cp\u003e그리고 object가 있는 경우에는 ctx에 checkPermssion 함수를 삽입, 라우터 내에서 \u003ccode\u003ectx.checkPermission(object)\u003c/code\u003e 와 같은 형식으로 검사를 할 수 있도록 구현했...었습니다.\u003c/p\u003e\n\u003ch2\u003e그런데 대상이 여러 개면?\u003c/h2\u003e\n\u003cp\u003e그런데 위 \u003ccode\u003echeckPermission\u003c/code\u003e 함수를 주입하는 방법에는 치명적인 문제가 있었습니다. 바로 object가 여러 개인 경우였습니다. 예컨대 게시판 리스트를 가져오는 경우 앞서 말한 바와 같이 어떤 게시판은 조회가 가능하고 어떤 게시판은 조회가 안 되어야 하는데, 그러면 게시판 목록을 가져온 후 \u003ccode\u003echeckPermission\u003c/code\u003e 함수를 매 게시판에 대해 실행하여 권한 검사를 해 주어야 합니다. 이는 매우매우 비효율적인 구현이었습니다.\u003c/p\u003e\n\u003cp\u003e여기에서도 머리를 한참 싸매다가, 나름 괜찮은 생각을 해 냈습니다. 바로 한 개의 오브젝트를 체크하는 함수를 삽입하는 것이 아니라 그냥 허용되는 오브젝트들을 전부 가져올 수 있는 함수를 삽입하는 것입니다. 그러면 라우터 내에서 허용되는 오브젝트들을 가져온 후 SQL에서 IN 연산을 통하여 쉽게 필터링을 할 수 있습니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e위 문단에서 '허용되는 오브젝트들의 리스트' 가 아니라 '허용되는 오브젝트들의 리스트를 가져오는 함수' 를 삽입한 이유는 불필요한 DB 질의를 막기 위해서입니다. 나중에 설명하겠지만 RBAC만으로 권한 컨트롤을 할 수 없는 경우도 있습니다. 그러면 ABAC등 추가적인 권한 시스템을 도입해야 합니다. 이 경우 오브젝트 권한 검사를 하기 전에 이미 접근 불가능함이 결정되는 경우가 있습니다. 그렇다면 굳이 오브젝트에 대한 권한 검사를 할 필요가 없으므로 라우터 내에서 오브젝트 권한 검사를 선택적으로 수행할 수 있도록 구성한 것입니다.\u003c/p\u003e\n\u003cp\u003e그리고 허용되는 모든 오브젝트를 가져오는 것이 언듯 비효율적인 것처럼 보이지만 오히려 효율적인 이유는 DB 조회 회수가 줄어들기 때문입니다. 이전의 방법에서 DB 조회가 N+1번 일어났다면 현재의 방법에서는 2번만 일어납니다. DB 조회는 레이턴시가 크기 때문에 무조건 조회가 적을수록 좋고, 따라서 현재 방법이 더 효율적입니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e아래는 위 내용을 모두 적용한, object가 있는 경우의 라우터입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMenuPermission\u003c/span\u003e = \u003cspan class=\"hljs-variable constant_\"\u003eRBAC\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRBACModule\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu\u0026#x27;\u003c/span\u003e, [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;get\u0026#x27;\u003c/span\u003e], \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e knex =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e menus = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e knex.\u003cspan class=\"hljs-title function_\"\u003eselect\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu_pk\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003efrom\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e menus.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({ \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: x.\u003cspan class=\"hljs-property\"\u003emenu_pk\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: x.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e }));\n});\n\nrouter.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;/\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eMenuPermission\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emiddlewares\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eget\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (ctx) =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e allowedObjects = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ctx.\u003cspan class=\"hljs-title function_\"\u003egetAllowedObjects\u003c/span\u003e();\n  \u003cspan class=\"hljs-comment\"\u003e// allowedObjects are actually list of primary keys.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e query = ctx.\u003cspan class=\"hljs-property\"\u003eknex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eselect\u003c/span\u003e([\n    \u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu_pk\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026#x27;parent_pk\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026#x27;url\u0026#x27;\u003c/span\u003e\n  ])\n    .\u003cspan class=\"hljs-title function_\"\u003efrom\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu\u0026#x27;\u003c/span\u003e)\n    .\u003cspan class=\"hljs-title function_\"\u003ewhereIn\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;menu_pk\u0026#x27;\u003c/span\u003e, allowedObjects)\n    .\u003cspan class=\"hljs-title function_\"\u003eorderBy\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;order\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;desc\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-comment\"\u003e// 중략\u003c/span\u003e\n  ctx.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e = result;\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e아래는 오브젝트가 없는 경우의 라우터입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSomePermission\u003c/span\u003e = \u003cspan class=\"hljs-variable constant_\"\u003eRBAC\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRBACModule\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;some\u0026#x27;\u003c/span\u003e, [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;list\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;read\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;delete\u0026#x27;\u003c/span\u003e]);\n\nrouter.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;/some/router\u0026#x27;\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eSomePermission\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emiddlewares\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elist\u003c/span\u003e,\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e ctx =\u0026gt; {\n  \t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = ctx.\u003cspan class=\"hljs-property\"\u003eknex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eselect\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003efrom\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;some_table\u0026#x27;\u003c/span\u003e)\n    ctx.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e = data;\n  });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 예시들에서는 Permission.middlewares.get 과 같이 미들웨어 이름이 길어서 가독성이 좋지 않습니다. 이는 예시를 위한 것이고, 새로운 변수에 미들웨어를 할당하여 간단히 짧게 줄일 수 있습니다.\u003c/p\u003e\n\u003ch2\u003eUser Model과 분리는?\u003c/h2\u003e\n\u003cp\u003e앞의 구현을 보면 미들웨어 내부에서 유저 정보를 이미 알고 있다고 가정했습니다. 그런데 사실은 이렇게 하면 유저 모델에 종속성이 생기게 됩니다. 미들웨어 내부에서 유저 정보가 어떤 변수에 어떤 이름으로 저장되어있을지 결정하는 것은 유저 모델인데, 이것에 따라 권한 시스템의 소스코드가 바뀌어야 하기 때문입니다. 따라서 저는 이런 종속성을 해결하기 위해 RBAC 모듈 자체를 초기화할 때 Koa의 ctx 오브젝트로부터 유저 정보, 즉 RBAC에서 subject에 해당하는 정보를 추출하는 함수를 파라매터로 받도록 하였습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// ../config/rbacConfig.js\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eRBAC\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;../libs/rbac\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;../env.json\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetSubject\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ectx\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(!ctx.\u003cspan class=\"hljs-property\"\u003esession\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// -1 means users without login.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(!ctx.\u003cspan class=\"hljs-property\"\u003esession\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euser\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e ctx.\u003cspan class=\"hljs-property\"\u003esession\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euser_pk\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e rbac = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eRBAC\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edb\u003c/span\u003e, getSubject);\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = rbac;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e실제로 RBAC 모듈을 사용할 때에는 rbac 모듈을 바로 import하는 것이 아니라 이 config파일을 import하여 사용합니다. 이렇게 함으로써 유저 모델과 권한 모델을 완전히 분리할 수 있습니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e즉, rbac 모듈(\u003ccode\u003e../libs/rbac\u003c/code\u003e)에서 export하는 것은 class이고, config 파일에서 export하는 것은 class의 instance입니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e즉, 이 권한 모델은 당장 라이브러리화하여 우리 동아리 홈페이지뿐만이 아니라 다른 서비스에 적용하는 것이 가능하다는 의미입니다.\u003c/p\u003e\n\u003ch2\u003e'소유자' 개념은?\u003c/h2\u003e\n\u003cp\u003e여태까지는 RBAC를 다루었지만 사실 모든 경우에 RBAC가 사용가능한 것은 아닙니다. 왜냐하면 어떤 게시글을 삭제하는 권한이 있다면 이 권한은 (관리자를 제외하면) 오직 그 게시글을 작성한 사람에게만 허용되어야 할 텐데, 이는 'object와 subject의 관계'에 따라 권한이 달라지기 때문입니다. 그런데 RBAC에서는 오직 object와 role, permission과 role의 N:M 관계만 존재할 뿐 object와 subject의 직접적인 관계는 존재하지 않습니다. 그러므로 이러한 관계에 기반한 권한 부여는 원리적으로 불가능하며, 따라서 이런 권한 체크는 Attribute-Based Access Control (ABAC) 등을 도입하여 해결해야 합니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e실제로는 유저 한 명만을 포함하는 role들을 유저 수만큼 생성하면 되기는 합니다. 그런데 그럴 경우 앞서 언급한 '이상적인 권한 시스템'과 같은 이유로 권한 개수가 폭증, 관리가 불가능하게 됩니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e그래서 이 문제를 오랫동안 고민했습니다. 그렇지만 사실상 위와 같은 삭제 API 몇 개를 제외하면 ABAC가 필요한 부분은 크게 많지 않다고 판단, 별도의 권한 시스템의 도입 없이 게시판 시스템 소스코드 단계에서 구현하기로 결정했습니다. 만약 이런 구현이 더 많이 필요해지게 된다면 물론 그때는 별도의 ABAC시스템을 구현할 것입니다.\u003c/p\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003cp\u003eRBAC 정책 모델을 Koa 기반으로 구현해보았습니다. 위 구현은 모듈화가 잘 되어 있기는 하지만 사실 Koa 라이브러리에 아주 약간의 종속성이 있습니다. 그러나 Express 등을 지원하도록 확장하는 것이 매우 간단하고, 심지어 (DB를 분리하고 API형태로 사용할 수 있도록) 하나의 독립된 서비스로 만드는 것까지  가능하다는 것 등을 고려하면 실질적인 종속성은 없다고 보아도 무방하다고 생각합니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eKnex는 내부적으로만 사용하므로 종속성이 아닙니다. 위에서 언급한 종속성이란 '제가 디자인한 이 권한 라이브러리를 쓰기 위해 라이브러리를 사용하는 쪽에서 제약되는 것'을 말합니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n","name":"rbac"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"rbac"},"buildId":"K3lEM_jkV_7gNUxDelP2D","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>